var xi=Object.create;var ve=Object.defineProperty;var Ri=Object.getOwnPropertyDescriptor;var Di=Object.getOwnPropertyNames;var Gi=Object.getPrototypeOf,yi=Object.prototype.hasOwnProperty;var _t=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')});var Ee=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var Pi=(a,e,t,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Di(e))!yi.call(a,r)&&r!==t&&ve(a,r,{get:()=>e[r],enumerable:!(c=Ri(e,r))||c.enumerable});return a};var Kt=(a,e,t)=>(t=a!=null?xi(Gi(a)):{},Pi(e||!a||!a.__esModule?ve(t,"default",{value:a,enumerable:!0}):t,a));var Jt=Ee(Gt=>{(function(a){Date.now=Date.now||function(){return new Date().getTime()};var e={extend:function(){arguments[0]=arguments[0]||{};for(var r=1;r<arguments.length;r++)for(var n in arguments[r])arguments[r].hasOwnProperty(n)&&(typeof arguments[r][n]=="object"?arguments[r][n]instanceof Array?arguments[0][n]=arguments[r][n]:arguments[0][n]=e.extend(arguments[0][n],arguments[r][n]):arguments[0][n]=arguments[r][n]);return arguments[0]},binarySearch:function(r,n){for(var d=0,o=r.length;d<o;){var i=d+o>>1;n<r[i][0]?o=i:d=i+1}return d},pixelSnap:function(r,n){return n%2===0?Math.round(r):Math.floor(r)+.5}};function t(r){this.options=e.extend({},t.defaultOptions,r),this.disabled=!1,this.clear()}t.defaultOptions={resetBoundsInterval:3e3,resetBounds:!0},t.prototype.clear=function(){this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN},t.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1],this.minValue=this.data[0][1];for(var r=1;r<this.data.length;r++){var n=this.data[r][1];n>this.maxValue&&(this.maxValue=n),n<this.minValue&&(this.minValue=n)}}else this.maxValue=Number.NaN,this.minValue=Number.NaN},t.prototype.append=function(r,n,d){if(!(isNaN(r)||isNaN(n))){var o=this.data.length-1;if(o>=0)for(var i=o;;){var s=this.data[i];if(r>=s[0]){r===s[0]?d?(s[1]+=n,n=s[1]):s[1]=n:this.data.splice(i+1,0,[r,n]);break}if(i--,i<0){this.data.splice(0,0,[r,n]);break}}else this.data.push([r,n]);this.maxValue=isNaN(this.maxValue)?n:Math.max(this.maxValue,n),this.minValue=isNaN(this.minValue)?n:Math.min(this.minValue,n)}},t.prototype.dropOldData=function(r,n){for(var d=0;this.data.length-d>=n&&this.data[d+1][0]<r;)d++;d!==0&&this.data.splice(0,d)};function c(r){this.options=e.extend({},c.defaultChartOptions,r),this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0,this.lastRenderTimeMillis=0,this.lastChartTimestamp=0,this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this)}c.tooltipFormatter=function(r,n){var d=this.options.timestampFormatter||c.timeFormatter,o=document.createElement("div"),i;o.appendChild(document.createTextNode(d(new Date(r))));for(var s=0;s<n.length;++s){i=n[s].series.options.tooltipLabel||"",i!==""&&(i=i+" ");var h=document.createElement("span");h.style.color=n[s].series.options.strokeStyle,h.appendChild(document.createTextNode(i+this.options.yMaxFormatter(n[s].value,this.options.labels.precision))),o.appendChild(document.createElement("br")),o.appendChild(h)}return o.innerHTML},c.defaultChartOptions={millisPerPixel:20,enableDpiScaling:!0,yMinFormatter:function(r,n){return parseFloat(r).toFixed(n)},yMaxFormatter:function(r,n){return parseFloat(r).toFixed(n)},yIntermediateFormatter:function(r,n){return parseFloat(r).toFixed(n)},maxValueScale:1,minValueScale:1,interpolation:"bezier",scaleSmoothing:.125,maxDataSetLength:2,scrollBackwards:!1,displayDataFromPercentile:1,grid:{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:2,millisPerLine:1e3,verticalSections:2,borderVisible:!0},labels:{fillStyle:"#ffffff",disabled:!1,fontSize:10,fontFamily:"monospace",precision:2,showIntermediateLabels:!1,intermediateLabelSameAxis:!0},title:{text:"",fillStyle:"#ffffff",fontSize:15,fontFamily:"monospace",verticalAlign:"middle"},horizontalLines:[],tooltip:!1,tooltipLine:{lineWidth:1,strokeStyle:"#BBBBBB"},tooltipFormatter:c.tooltipFormatter,nonRealtimeData:!1,responsive:!1,limitFPS:0},c.AnimateCompatibility=function(){var r=function(d,o){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(s){return window.setTimeout(function(){s(Date.now())},16)};return i.call(window,d,o)},n=function(d){var o=window.cancelAnimationFrame||function(i){clearTimeout(i)};return o.call(window,d)};return{requestAnimationFrame:r,cancelAnimationFrame:n}}(),c.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:"#ffffff"},c.prototype.addTimeSeries=function(r,n){this.seriesSet.push({timeSeries:r,options:e.extend({},c.defaultSeriesPresentationOptions,n)}),r.options.resetBounds&&r.options.resetBoundsInterval>0&&(r.resetBoundsTimerId=setInterval(function(){r.resetBounds()},r.options.resetBoundsInterval))},c.prototype.removeTimeSeries=function(r){for(var n=this.seriesSet.length,d=0;d<n;d++)if(this.seriesSet[d].timeSeries===r){this.seriesSet.splice(d,1);break}r.resetBoundsTimerId&&clearInterval(r.resetBoundsTimerId)},c.prototype.getTimeSeriesOptions=function(r){for(var n=this.seriesSet.length,d=0;d<n;d++)if(this.seriesSet[d].timeSeries===r)return this.seriesSet[d].options},c.prototype.bringToFront=function(r){for(var n=this.seriesSet.length,d=0;d<n;d++)if(this.seriesSet[d].timeSeries===r){var o=this.seriesSet.splice(d,1);this.seriesSet.push(o[0]);break}},c.prototype.streamTo=function(r,n){this.canvas=r,this.clientWidth=parseInt(this.canvas.getAttribute("width")),this.clientHeight=parseInt(this.canvas.getAttribute("height")),this.delay=n,this.start()},c.prototype.getTooltipEl=function(){return this.tooltipEl||(this.tooltipEl=document.createElement("div"),this.tooltipEl.className="smoothie-chart-tooltip",this.tooltipEl.style.pointerEvents="none",this.tooltipEl.style.position="absolute",this.tooltipEl.style.display="none",document.body.appendChild(this.tooltipEl)),this.tooltipEl},c.prototype.updateTooltip=function(){if(this.options.tooltip){var r=this.getTooltipEl();if(!this.mouseover||!this.options.tooltip){r.style.display="none";return}for(var n=this.lastChartTimestamp,d=this.options.scrollBackwards?n-this.mouseX*this.options.millisPerPixel:n-(this.clientWidth-this.mouseX)*this.options.millisPerPixel,o=[],i=0;i<this.seriesSet.length;i++){var s=this.seriesSet[i].timeSeries;if(!s.disabled){var h=e.binarySearch(s.data,d);h>0&&h<s.data.length&&o.push({series:this.seriesSet[i],index:h,value:s.data[h][1]})}}o.length?(r.innerHTML=this.options.tooltipFormatter.call(this,d,o),r.style.display="block"):r.style.display="none"}},c.prototype.mousemove=function(r){if(this.mouseover=!0,this.mouseX=r.offsetX,this.mouseY=r.offsetY,this.mousePageX=r.pageX,this.mousePageY=r.pageY,!!this.options.tooltip){var n=this.getTooltipEl();n.style.top=Math.round(this.mousePageY)+"px",n.style.left=Math.round(this.mousePageX)+"px",this.updateTooltip()}},c.prototype.mouseout=function(){this.mouseover=!1,this.mouseX=this.mouseY=-1,this.tooltipEl&&(this.tooltipEl.style.display="none")},c.prototype.resize=function(){var r=!this.options.enableDpiScaling||!window?1:window.devicePixelRatio,n,d;this.options.responsive?(n=this.canvas.offsetWidth,d=this.canvas.offsetHeight,n!==this.lastWidth&&(this.lastWidth=n,this.canvas.setAttribute("width",Math.floor(n*r).toString()),this.canvas.getContext("2d").scale(r,r)),d!==this.lastHeight&&(this.lastHeight=d,this.canvas.setAttribute("height",Math.floor(d*r).toString()),this.canvas.getContext("2d").scale(r,r)),this.clientWidth=n,this.clientHeight=d):(n=parseInt(this.canvas.getAttribute("width")),d=parseInt(this.canvas.getAttribute("height")),r!==1?(Math.floor(this.clientWidth*r)!==n&&(this.canvas.setAttribute("width",Math.floor(n*r).toString()),this.canvas.style.width=n+"px",this.clientWidth=n,this.canvas.getContext("2d").scale(r,r)),Math.floor(this.clientHeight*r)!==d&&(this.canvas.setAttribute("height",Math.floor(d*r).toString()),this.canvas.style.height=d+"px",this.clientHeight=d,this.canvas.getContext("2d").scale(r,r))):(this.clientWidth=n,this.clientHeight=d))},c.prototype.start=function(){if(!this.frame){this.canvas.addEventListener("mousemove",this.mousemove),this.canvas.addEventListener("mouseout",this.mouseout);var r=function(){this.frame=c.AnimateCompatibility.requestAnimationFrame(function(){if(this.options.nonRealtimeData){var n=new Date(0),d=this.seriesSet.reduce(function(o,i){var s=i.timeSeries.data,h=Math.round(this.options.displayDataFromPercentile*s.length)-1;if(h=h>=0?h:0,h=h<=s.length-1?h:s.length-1,s&&s.length>0){var f=s[h][0];o=o>f?o:f}return o}.bind(this),n);this.render(this.canvas,d>n?d:null)}else this.render();r()}.bind(this))}.bind(this);r()}},c.prototype.stop=function(){this.frame&&(c.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame,this.canvas.removeEventListener("mousemove",this.mousemove),this.canvas.removeEventListener("mouseout",this.mouseout))},c.prototype.updateValueRange=function(){for(var r=this.options,n=Number.NaN,d=Number.NaN,o=0;o<this.seriesSet.length;o++){var i=this.seriesSet[o].timeSeries;i.disabled||(isNaN(i.maxValue)||(n=isNaN(n)?i.maxValue:Math.max(n,i.maxValue)),isNaN(i.minValue)||(d=isNaN(d)?i.minValue:Math.min(d,i.minValue)))}if(r.maxValue!=null?n=r.maxValue:n*=r.maxValueScale,r.minValue!=null?d=r.minValue:d-=Math.abs(d*r.minValueScale-d),this.options.yRangeFunction){var s=this.options.yRangeFunction({min:d,max:n});d=s.min,n=s.max}if(!isNaN(n)&&!isNaN(d)){var h=n-d,f=h-this.currentValueRange,u=d-this.currentVisMinValue;this.isAnimatingScale=Math.abs(f)>.1||Math.abs(u)>.1,this.currentValueRange+=r.scaleSmoothing*f,this.currentVisMinValue+=r.scaleSmoothing*u}this.valueRange={min:d,max:n}},c.prototype.render=function(r,n){var d=Date.now();if(!(this.options.limitFPS>0&&d-this.lastRenderTimeMillis<1e3/this.options.limitFPS)){if(n=(n||d)-(this.delay||0),n-=n%this.options.millisPerPixel,!this.isAnimatingScale){var o=this.lastChartTimestamp===n;if(o){var i=d-this.lastRenderTimeMillis>166.66666666666666;if(!i)return}}this.lastRenderTimeMillis=d,this.lastChartTimestamp=n,this.resize(),r=r||this.canvas;var s=r.getContext("2d"),h=this.options,f={top:0,left:0,width:this.clientWidth,height:this.clientHeight},u=n-f.width*h.millisPerPixel,g=function(k,U){var K=k-this.currentVisMinValue,ot=this.currentValueRange===0?f.height:f.height*(1-K/this.currentValueRange);return e.pixelSnap(ot,U)}.bind(this),v=function(k,U){var K=h.scrollBackwards?(n-k)/h.millisPerPixel:f.width-(n-k)/h.millisPerPixel;return e.pixelSnap(K,U)};if(this.updateValueRange(),s.font=h.labels.fontSize+"px "+h.labels.fontFamily,s.save(),s.translate(f.left,f.top),s.beginPath(),s.rect(0,0,f.width,f.height),s.clip(),s.save(),s.fillStyle=h.grid.fillStyle,s.clearRect(0,0,f.width,f.height),s.fillRect(0,0,f.width,f.height),s.restore(),s.save(),s.lineWidth=h.grid.lineWidth,s.strokeStyle=h.grid.strokeStyle,h.grid.millisPerLine>0){s.beginPath();for(var p=n-n%h.grid.millisPerLine;p>=u;p-=h.grid.millisPerLine){var T=v(p,h.grid.lineWidth);s.moveTo(T,0),s.lineTo(T,f.height)}s.stroke(),s.closePath()}for(var F=1;F<h.grid.verticalSections;F++){var I=e.pixelSnap(F*f.height/h.grid.verticalSections,h.grid.lineWidth);s.beginPath(),s.moveTo(0,I),s.lineTo(f.width,I),s.stroke(),s.closePath()}if(h.grid.borderVisible&&(s.beginPath(),s.strokeRect(0,0,f.width,f.height),s.closePath()),s.restore(),h.horizontalLines&&h.horizontalLines.length)for(var E=0;E<h.horizontalLines.length;E++){var M=h.horizontalLines[E],_=M.lineWidth||1,C=g(M.value,_);s.strokeStyle=M.color||"#ffffff",s.lineWidth=_,s.beginPath(),s.moveTo(0,C),s.lineTo(f.width,C),s.stroke(),s.closePath()}for(var l=0;l<this.seriesSet.length;l++){var L=this.seriesSet[l].timeSeries,m=L.data;if(L.dropOldData(u,h.maxDataSetLength),!(m.length<=1||L.disabled)){s.save();var S=this.seriesSet[l].options,A=S.strokeStyle&&S.strokeStyle!=="none",w=A?S.lineWidth:0;s.beginPath();var x=v(m[0][0],w),G=g(m[0][1],w),N=x,R=G,H;switch(s.moveTo(x,G),S.interpolation||h.interpolation){case"linear":case"line":{H=function(k,U,K,ot){s.lineTo(k,U)};break}case"bezier":default:{H=function(k,U,K,ot){s.bezierCurveTo(Math.round((K+k)/2),ot,Math.round(K+k)/2,U,k,U)};break}case"step":{H=function(k,U,K,ot){s.lineTo(k,ot),s.lineTo(k,U)};break}}for(var X=1;X<m.length;X++){var at=m[X],pt=v(at[0],w),ge=g(at[1],w);H(pt,ge,N,R),N=pt,R=ge}A&&(s.lineWidth=S.lineWidth,s.strokeStyle=S.strokeStyle,s.stroke()),S.fillStyle&&(s.lineTo(N,f.height+w+1),s.lineTo(x,f.height+w+1),s.fillStyle=S.fillStyle,s.fill()),s.restore()}}h.tooltip&&this.mouseX>=0&&(s.lineWidth=h.tooltipLine.lineWidth,s.strokeStyle=h.tooltipLine.strokeStyle,s.beginPath(),s.moveTo(this.mouseX,0),s.lineTo(this.mouseX,f.height),s.closePath(),s.stroke()),this.updateTooltip();var j=h.labels;if(!j.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var Se=h.yMaxFormatter(this.valueRange.max,j.precision),Dt=h.yMinFormatter(this.valueRange.min,j.precision),Ii=h.scrollBackwards?0:f.width-s.measureText(Se).width-2,bi=h.scrollBackwards?0:f.width-s.measureText(Dt).width-2;s.fillStyle=j.fillStyle,s.fillText(Se,Ii,j.fontSize),s.fillText(Dt,bi,f.height-2)}if(j.showIntermediateLabels&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)&&h.grid.verticalSections>0)for(var Ti=(this.valueRange.max-this.valueRange.min)/h.grid.verticalSections,wi=f.height/h.grid.verticalSections,F=1;F<h.grid.verticalSections;F++){var I=f.height-Math.round(F*wi),qt=h.yIntermediateFormatter(this.valueRange.min+F*Ti,j.precision),Fi=j.intermediateLabelSameAxis?h.scrollBackwards?0:f.width-s.measureText(qt).width-2:h.scrollBackwards?f.width-s.measureText(qt).width-2:0;s.fillText(qt,Fi,I-h.grid.lineWidth)}if(h.timestampFormatter&&h.grid.millisPerLine>0)for(var Zt=h.scrollBackwards?s.measureText(Dt).width:f.width-s.measureText(Dt).width+4,p=n-n%h.grid.millisPerLine;p>=u;p-=h.grid.millisPerLine){var T=v(p,0);if(!h.scrollBackwards&&T<Zt||h.scrollBackwards&&T>Zt){var Mi=new Date(p),$t=h.timestampFormatter(Mi),Qt=s.measureText($t).width;Zt=h.scrollBackwards?T+Qt+2:T-Qt-2,s.fillStyle=h.labels.fillStyle,h.scrollBackwards?s.fillText($t,T,f.height-2):s.fillText($t,T-Qt,f.height-2)}}if(h.title.text!==""){s.font=h.title.fontSize+"px "+h.title.fontFamily;var Li=h.scrollBackwards?f.width-s.measureText(h.title.text).width-2:2;if(h.title.verticalAlign=="bottom"){s.textBaseline="bottom";var jt=f.height}else if(h.title.verticalAlign=="middle"){s.textBaseline="middle";var jt=f.height/2}else{s.textBaseline="top";var jt=0}s.fillStyle=h.title.fillStyle,s.fillText(h.title.text,Li,jt)}s.restore()}},c.timeFormatter=function(r){function n(d){return(d<10?"0":"")+d}return n(r.getHours())+":"+n(r.getMinutes())+":"+n(r.getSeconds())},a.TimeSeries=t,a.SmoothieChart=c})(Gt)});var we=Ee((Te,te)=>{(function(a){if(typeof Te=="object"&&typeof te<"u")te.exports=a();else if(typeof define=="function"&&define.amd)define([],a);else{var e;e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this,e.Fili=a()}})(function(){return function a(e,t,c){function r(o,i){if(!t[o]){if(!e[o]){var s=typeof _t=="function"&&_t;if(!i&&s)return s(o,!0);if(n)return n(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(u){var g=e[o][1][u];return r(g||u)},f,f.exports,a,e,t,c)}return t[o].exports}for(var n=typeof _t=="function"&&_t,d=0;d<c.length;d++)r(c[d]);return r}({1:[function(a,e,t){"use strict";e.exports={CalcCascades:a("./src/calcCascades"),Fft:a("./src/fft"),FirCoeffs:a("./src/firCoeffs"),FirFilter:a("./src/firFilter"),IirCoeffs:a("./src/iirCoeffs"),IirFilter:a("./src/iirFilter"),TestFilter:a("./src/testFilter")}},{"./src/calcCascades":2,"./src/fft":3,"./src/firCoeffs":4,"./src/firFilter":5,"./src/iirCoeffs":6,"./src/iirFilter":7,"./src/testFilter":8}],2:[function(a,e,t){"use strict";var c=a("./iirCoeffs"),r=new c,n={bessel:{q:[[.57735026919],[.805538281842,.521934581669],[1.02331395383,.611194546878,.510317824749],[1.22566942541,.710852074442,.559609164796,.505991069397],[1.41530886916,.809790964842,.620470155556,.537552151325,.503912727276],[1.59465693507,.905947107025,.684008068137,.579367238641,.525936202016,.502755558204],[1.76552743493,.998998442993,.747625068271,.624777082395,.556680772868,.519027293158,.502045428643],[1.9292718407,1.08906376917,.810410302962,.671382379377,.591144659703,.542678365981,.514570953471,.501578400482],[2.08691792612,1.17637337045,.872034231424,.718163551101,.627261751983,.569890924765,.533371782078,.511523796759,.50125489338],[2.23926560629,1.26117120993,.932397288146,.764647810579,.664052481472,.598921924986,.555480327396,.526848630061,.509345928377,.501021580965],[2.38695091667,1.34368488961,.991497755204,.81060830488,.701011199665,.628878390935,.57943181849,.545207253735,.52208637596,.507736060535,.500847111042],[2.53048919562,1.42411783481,1.04937620183,.85593899901,.737862159044,.659265671705,.604435823473,.565352679646,.537608804383,.51849505465,.506508536474,.500715908905]],f3dB:[[1.27201964951],[1.60335751622,1.43017155999],[1.9047076123,1.68916826762,1.60391912877],[2.18872623053,1.95319575902,1.8320926012,1.77846591177],[2.45062684305,2.20375262593,2.06220731793,1.98055310881,1.94270419166],[2.69298925084,2.43912611431,2.28431825401,2.18496722634,2.12472538477,2.09613322542],[2.91905714471,2.66069088948,2.49663434571,2.38497976939,2.30961462222,2.26265746534,2.24005716132],[3.13149167404,2.87016099416,2.69935018044,2.57862945683,2.49225505119,2.43227707449,2.39427710712,2.37582307687],[3.33237300564,3.06908580184,2.89318259511,2.76551588399,2.67073340527,2.60094950474,2.55161764546,2.52001358804,2.50457164552],[3.52333123464,3.25877569704,3.07894353744,2.94580435024,2.84438325189,2.76691082498,2.70881411245,2.66724655259,2.64040228249,2.62723439989],[3.70566068548,3.44032173223,3.2574059854,3.11986367838,3.01307175388,2.92939234605,2.86428726094,2.81483068055,2.77915465405,2.75596888377,2.74456638588],[3.88040469682,3.61463243697,3.4292654707,3.28812274966,3.17689762788,3.08812364257,3.01720732972,2.96140104561,2.91862858495,2.88729479473,2.8674198668,2.8570800015]],f1dB:[[2.16477559371],[2.70320928596,2.41122332505],[3.25676581436,2.88822569572,2.74246238837],[3.76153580353,3.35675411406,3.14862673032,3.05646412475],[4.22174260104,3.79644757806,3.55260471864,3.41193742197,3.34673435508],[4.64584812552,4.20789257981,3.94082363122,3.76942681446,3.66549975744,3.61617359345],[5.04060395196,4.5944592201,4.3111677248,4.11836351827,3.98822359814,3.90713836715,3.86811234525],[5.41107948467,4.95951159709,4.66435804468,4.45575796102,4.30650679478,4.20286750045,4.13720522991,4.10531748119],[5.76110791853,5.30592898465,5.00182215701,4.7811081045,4.61724509926,4.49660100894,4.41131378918,4.35667671372,4.32997951075],[6.09364309488,5.63609116014,5.32506930789,5.09480346139,4.91939504255,4.78540258409,4.68493280536,4.61302286993,4.56661931366,4.54382759952],[6.41100731543,5.95195558182,5.63550073656,5.39754464742,5.21278891332,5.06801430334,4.95539684456,4.8697869429,4.80814951843,4.76793469612,4.74828032403],[6.71506056052,6.25514029778,5.9343616072,5.69011422355,5.49763642361,5.34401973764,5.22125973611,5.12485045619,5.05037962112,4.99699982231,4.96155789635,4.94441828777]]}},d={bessel:{as:[[1.3617],[1.3397,.7743],[1.2217,.9686,.5131],[1.1112,.9754,.7202,.3728],[1.0215,.9393,.7815,.5604,.2883]],bs:[[.618],[.4889,.389],[.3887,.3505,.2756],[.3162,.2979,.2621,.2087],[.265,.2549,.2351,.2059,.1665]]},butterworth:{as:[[1.4142],[1.8478,.7654],[1.9319,1.4142,.5176],[1.9616,1.6629,1.1111,.3902],[1.9754,1.782,1.4142,.908,.3129]],bs:[[1],[1,1],[1,1,1],[1,1,1,1],[1,1,1,1,1]]},tschebyscheff05:{as:[[1.3614],[2.6282,.3648],[3.8645,.7528,.1589],[5.1117,1.0639,.3439,.0885],[6.3648,1.3582,.4822,.1994,.0563]],bs:[[1.3827],[3.4341,1.1509],[6.9797,1.8573,1.0711],[11.9607,2.9365,1.4206,1.0407],[18.3695,4.3453,1.944,1.252,1.0263]]},tschebyscheff1:{as:[[1.3022],[2.5904,.3039],[3.8437,.6292,.1296],[5.1019,.8916,.2806,.0717],[6.3634,1.1399,.3939,.1616,.0455]],bs:[[1.5515],[4.1301,1.1697],[8.5529,1.9124,1.0766],[14.7608,3.0426,1.4334,1.0432],[22.7468,4.5167,1.9665,1.2569,1.0277]]},tschebyscheff2:{as:[[1.1813],[2.4025,.2374],[3.588,.4925,.0995],[4.7743,.6991,.2153,.0547],[5.9618,.8947,.3023,.1233,.0347]],bs:[[1.7775],[4.9862,1.1896],[10.4648,1.9622,1.0826],[18.151,3.1353,1.4449,1.0461],[28.0376,4.6644,1.9858,1.2614,1.0294]]},tschebyscheff3:{as:[[1.065],[2.1853,.1964],[3.2721,.4077,.0815],[4.3583,.5791,.1765,.0448],[5.4449,.7414,.2479,.1008,.0283]],bs:[[1.9305],[5.5339,1.2009],[11.6773,1.9873,1.0861],[20.2948,3.1808,1.4507,1.0478],[31.3788,4.7363,1.9952,1.2638,1.0304]]},allpass:{as:[[1.6278],[2.337,1.3506],[2.6117,2.0706,1.0967],[2.7541,2.4174,1.785,.9239],[2.8406,2.612,2.1733,1.5583,.8018]],bs:[[.8832],[1.4878,1.1837],[1.7763,1.6015,1.2596],[1.942,1.83,1.6101,1.2822],[2.049,1.9714,1.8184,1.5923,1.2877]]}},o=function(f,u){var g=[],v=0;if(u!=="fromPZ")for(f.order>12&&(f.order=12),v=0;v<f.order;v++){var p,T,F;f.transform==="matchedZ"?g.push(r.lowpassMZ({Fs:f.Fs,Fc:f.Fc,preGain:f.preGain,as:d[f.characteristic].as[f.order-1][v],bs:d[f.characteristic].bs[f.order-1][v]})):(f.characteristic==="butterworth"?(p=.5/Math.sin(Math.PI/(2*f.order)*(v+.5)),T=1):(p=n[f.characteristic].q[f.order-1][v],T=f.oneDb?n[f.characteristic].f1dB[f.order-1][v]:n[f.characteristic].f3dB[f.order-1][v]),F=u==="highpass"?f.Fc/T:f.Fc*T,u!=="bandpass"&&u!=="bandstop"||f.characteristic==="bessel"&&(F=Math.sqrt(f.order)*F/f.order),g.push(r[u]({Fs:f.Fs,Fc:F,Q:p,BW:f.BW||0,gain:f.gain||0,preGain:f.preGain||!1})))}else for(v=0;v<f.length;v++)g.push(r[u](f[v]));return g},i=function(f){return function(u){return o(u,f)}},s={},h=function(){var f=[];for(var u in r)s[u]=i(u),f.push(u);return s.available=function(){return f},s};e.exports=h},{"./iirCoeffs":6}],3:[function(a,e,t){"use strict";var c=function(r){if(!function(_){return!(_&_-1)}(r))return!1;var n={};n.length=r,n.buffer=new Float64Array(r),n.re=new Float64Array(r),n.im=new Float64Array(r),n.reI=new Float64Array(r),n.imI=new Float64Array(r),n.twiddle=new Int32Array(r),n.sinTable=new Float64Array(r-1),n.cosTable=new Float64Array(r-1);var d=2*Math.PI,o=Math.floor(Math.log(r)/Math.LN2);for(s=n.sinTable.length;s--;)n.sinTable[s]=Math.sin(d*(s/r)),n.cosTable[s]=Math.cos(d*(s/r));for(var i=r>>1,s=0,h=0;n.twiddle[s]=h,!(++s>=r);){for(o=i;o<=h;)h-=o,o>>=1;h+=o}var f=Math.PI,u=2*Math.PI,g=Math.abs,v=Math.pow,p=Math.cos,T=Math.sin,F=function(_){return T(f*_)/(f*_)},I=Math.E,E={rectangular:{calc:function(){return 1},values:[],correction:1},none:{calc:function(){return 1},values:[],correction:1},hanning:{calc:function(_,C){return .5*(1-p(u*_/(C-1)))},values:[],correction:2},hamming:{calc:function(_,C){return .54-.46*p(u*_/(C-1))},values:[],correction:1.8518999946875638},tukery:{calc:function(_,C,l){return _<l*(C-1)/2?.5*(1+p(f*(2*_/(l*(C-1))-1))):(C-1)*(1-l/2)<_?.5*(1+p(f*(2*_/(l*(C-1))-2/l+1))):1},values:[],correction:4/3},cosine:{calc:function(_,C){return T(f*_/(C-1))},values:[],correction:1.570844266360796},lanczos:{calc:function(_,C){return F(2*_/(C-1)-1)},values:[],correction:1.6964337576195783},triangular:{calc:function(_,C){return 2/(C+1)*((C+1)/2-g(_-(C-1)/2))},values:[],correction:2},bartlett:{calc:function(_,C){return 2/(C-1)*((C-1)/2-g(_-(C-1)/2))},values:[],correction:2},gaussian:{calc:function(_,C,l){return v(I,-.5*v((_-(C-1)/2)/(l*(C-1)/2),2))},values:[],correction:5/3},bartlettHanning:{calc:function(_,C){var l=u*_/(C-1);return .62-.48*g(_/(C-1)-.5)-.38*p(l)},values:[],correction:2},blackman:{calc:function(_,C,l){var L=(1-l)/2,m=l/2,S=u*_/(C-1);return L-.5*p(S)+m*p(2*S)},values:[],correction:4/3},blackmanHarris:{calc:function(_,C){var l=u*_/(C-1);return .35875-.48829*p(l)+.14128*p(2*l)-.01168*p(3*l)},values:[],correction:1.5594508635},nuttall3:{calc:function(_,C){var l=u*_/(C-1);return .375-.5*p(l)+.125*p(2*l)},values:[],correction:1.56},nuttall3a:{calc:function(_,C){var l=u*_/(C-1);return .40897-.5*p(l)+.09103*p(2*l)},values:[],correction:1.692},nuttall3b:{calc:function(_,C){var l=u*_/(C-1);return .4243801-.4973406*p(l)+.078793*p(2*l)},values:[],correction:1.7372527},nuttall4:{calc:function(_,C){var l=u*_/(C-1);return .3125-.46875*p(l)+.1875*p(2*l)-.03125*p(3*l)},values:[],correction:1.454543},nuttall4a:{calc:function(_,C){var l=u*_/(C-1);return .338946-.481973*p(l)+.161054*p(2*l)-.018027*p(3*l)},values:[],correction:1.512732763},nuttall4b:{calc:function(_,C){var l=u*_/(C-1);return .355768-.481973*p(l)+.144232*p(2*l)-.012604*p(3*l)},values:[],correction:1.55223262},nuttall4c:{calc:function(_,C){var l=u*_/(C-1);return .3635819-.4891775*p(l)+.1365995*p(2*l)-.0106411*p(3*l)},values:[],correction:1.57129067},sft3f:{calc:function(_,C){var l=u*_/(C-1);return .26526-.5*p(l)+.23474*p(2*l)},values:[],correction:1.3610238},sft4f:{calc:function(_,C){var l=u*_/(C-1);return .21706-.42103*p(l)+.28294*p(2*l)-.07897*p(3*l)},values:[],correction:1.2773573},sft5f:{calc:function(_,C){var l=u*_/(C-1);return .1881-.36923*p(l)+.28702*p(2*l)-.13077*p(3*l)+.02488*p(4*l)},values:[],correction:1.23167769},sft3m:{calc:function(_,C){var l=u*_/(C-1);return .28235-.52105*p(l)+.19659*p(2*l)},values:[],correction:1.39343451},sft4m:{calc:function(_,C){var l=u*_/(C-1);return .241906-.460841*p(l)+.2552381*p(2*l)-.041872*p(3*l)},values:[],correction:1.3190596},sft5m:{calc:function(_,C){var l=u*_/(C-1);return .209671-.407331*p(l)+.281225*p(2*l)-.092669*p(3*l)+.0091036*p(4*l)},values:[],correction:1.26529456464},nift:{calc:function(_,C){var l=u*_/(C-1);return .2810639-.5208972*p(l)+.1980399*p(2*l)},values:[],correction:1.39094182},hpft:{calc:function(_,C){var l=u*_/(C-1);return(1-1.912510941*p(l)+1.079173272*p(2*l)-.1832630879*p(3*l))/C},values:[],correction:1},srft:{calc:function(_,C){var l=u*_/(C-1);return(1-1.93*p(l)+1.29*p(2*l)-.388*p(3*l)+.028*p(4*l))/C},values:[],correction:1},hft70:{calc:function(_,C){var l=u*_/(C-1);return(1-1.90796*p(l)+1.07349*p(2*l)-.18199*p(3*l))/C},values:[],correction:1},hft95:{calc:function(_,C){var l=u*_/(C-1);return(1-1.9383379*p(l)+1.3045202*p(2*l)-.402827*p(3*l)+.0350665*p(4*l))/C},values:[],correction:1},hft90d:{calc:function(_,C){var l=u*_/(C-1);return(1-1.942604*p(l)+1.340318*p(2*l)-.440811*p(3*l)+.043097*p(4*l))/C},values:[],correction:1},hft116d:{calc:function(_,C){var l=u*_/(C-1);return(1-1.9575375*p(l)+1.4780705*p(2*l)-.6367431*p(3*l)+.1228389*p(4*l)-.0066288*p(5*l))/C},values:[],correction:1},hft144d:{calc:function(_,C){var l=u*_/(C-1);return(1-1.96760033*p(l)+1.57983607*p(2*l)-.81123644*p(3*l)+.22583558*p(4*l)-.02773848*p(5*l)+9036e-7*p(6*l))/C},values:[],correction:1},hft196d:{calc:function(_,C){var l=u*_/(C-1);return(1-1.97441842*p(l)+1.65409888*p(2*l)-.95788186*p(3*l)+.3367342*p(4*l)-.06364621*p(5*l)+.00521942*p(6*l)-10599e-8*p(7*l))/C},values:[],correction:1},hft223d:{calc:function(_,C){var l=u*_/(C-1);return(1-1.98298997309*p(l)+1.75556083063*p(2*l)-1.19037717712*p(3*l)+.56155440797*p(4*l)-.17296769663*p(5*l)+.03233247087*p(6*l)-.00324954578*p(7*l)+.0001380104*p(8*l)-132725e-11*p(9*l))/C},values:[],correction:1},hft248d:{calc:function(_,C){var l=u*_/(C-1);return(1-1.985844164102*p(l)+1.791176438506*p(2*l)-1.282075284005*p(3*l)+.667777530266*p(4*l)-.240160796576*p(5*l)+.056656381764*p(6*l)-.008134974479*p(7*l)+.00062454465*p(8*l)-19808998e-12*p(9*l)+132974e-12*p(10*l))/C},values:[],correction:1}},M=function(_){return E[_.name].values.length!==_.N?(_.n===0&&(E[_.name].values.length=0),E[_.name].values[_.n]=E[_.name].correction*E[_.name].calc(_.n,_.N,_.a),E[_.name].values[_.n]):E[_.name].values};return{forward:function(_,C){var l,L,m,S,A,w,x,G,N,R,H,X;m=n.buffer.length;var at={name:C,N:m,a:.5,n:0},pt=M(at);if(typeof pt=="number")for(l=0;l<m;++l)at.n=l,n.buffer[l]=_[l]*M(at);else for(l=0;l<m;++l)n.buffer[l]=_[l]*pt[l];for(l=m;l--;)n.re[l]=n.buffer[n.twiddle[l]],n.im[l]=0;for(S=1;S<m;S=A)for(w=0,A=S+S,x=m/A,L=0;L<S;L++){for(G=n.cosTable[w],N=n.sinTable[w],l=L;l<m;l+=A)R=l+S,H=N*n.im[R]+G*n.re[R],X=G*n.im[R]-N*n.re[R],n.re[R]=n.re[l]-H,n.re[l]+=H,n.im[R]=n.im[l]-X,n.im[l]+=X;w+=x}return{re:n.re,im:n.im}},inverse:function(_,C){var l,L,m,S,A,w,x,G,N,R,H,X;for(m=_.length,l=m;l--;)L=n.twiddle[l],n.reI[l]=_[L],n.imI[l]=-C[L];for(S=1;S<m;S=A)for(w=0,A=S+S,x=m/A,L=0;L<S;L++){for(G=n.cosTable[w],N=n.sinTable[w],l=L;l<m;l+=A)R=l+S,H=N*n.imI[R]+G*n.reI[R],X=G*n.imI[R]-N*n.reI[R],n.reI[R]=n.reI[l]-H,n.reI[l]+=H,n.imI[R]=n.imI[l]-X,n.imI[l]+=X;w+=x}for(l=m;l--;)n.buffer[l]=n.reI[l]/m;return n.buffer},magnitude:function(_){for(var C=[],l=0;l<_.re.length;l++)C.push(Math.sqrt(_.re[l]*_.re[l]+_.im[l]*_.im[l]));return C},magToDb:function(_){for(var C=[],l=0;l<_.length;l++)C.push(20*Math.log(_[l])*Math.LOG10E);return C},phase:function(_){for(var C=[],l=0;l<_.re.length;l++)C.push(Math.atan2(_.im[l],_.re[l]));return C},windows:function(){var _=[];for(var C in E)_.push(C);return _}}};e.exports=c},{}],4:[function(a,e,t){"use strict";var c=function(){var r=function(i){var s=i.Fs,h=i.Fa,f=i.Fb,u=i.order||51,g=i.Att||100,v=function(_){for(var C=0,l=1,L=1;l>1e-6*L;)C+=2,l*=_*_/(C*C),L+=l;return L};u/2-Math.floor(u/2)==0&&u++;var p,T=(u-1)/2,F=[],I=0,E=0,M=[];for(F[0]=2*(f-h)/s,E=1;E<=T;E++)F[E]=(Math.sin(2*E*Math.PI*f/s)-Math.sin(2*E*Math.PI*h/s))/(E*Math.PI);for(I=g<21?0:g>50?.1102*(g-8.7):.5842*Math.pow(g-21,.4)+.07886*(g-21),p=v(I),E=0;E<=T;E++)M[T+E]=F[E]*v(I*Math.sqrt(1-E*E/(T*T)))/p;for(E=0;E<T;E++)M[E]=M[u-1-E];return M},n=function(i){var s=i.Fs,h=i.Fc,f=i.order,u=2*Math.PI*h/s,g=0,v=0,p=[];for(g=0;g<=f;g++)g-f/2==0?p[g]=u:(p[g]=Math.sin(u*(g-f/2))/(g-f/2),p[g]*=.54-.46*Math.cos(2*Math.PI*g/f)),v+=p[g];for(g=0;g<=f;g++)p[g]/=v;return p},d=function(i){var s;for(s=0;s<i.length;s++)i[s]=-i[s];return i[(i.length-1)/2]++,i},o=function(i){for(var s=n({order:i.order,Fs:i.Fs,Fc:i.F2}),h=d(n({order:i.order,Fs:i.Fs,Fc:i.F1})),f=[],u=0;u<s.length;u++)f.push(s[u]+h[u]);return f};return{lowpass:function(i){return n(i)},highpass:function(i){return d(n(i))},bandstop:function(i){return o(i)},bandpass:function(i){return d(o(i))},kbFilter:function(i){return r(i)},available:function(){return["lowpass","highpass","bandstop","bandpass","kbFilter"]}}};e.exports=c},{}],5:[function(a,e,t){"use strict";var c=a("./utils"),r=c.runMultiFilter,n=c.runMultiFilterReverse,d=c.complex,o=c.evaluatePhase,i=function(s){var h=s,f=[],u=0;for(u=0;u<h.length;u++)f[u]={re:h[u],im:0};var g=function(I){var E,M=[];for(E=0;E<I;E++)M.push(0);return{buf:M,pointer:0}},v=g(h.length-1),p=function(I,E){E.buf[E.pointer]=I;var M=0;for(u=0;u<E.buf.length;u++)M+=h[u]*E.buf[(E.pointer+u)%E.buf.length];return E.pointer=(E.pointer+1)%E.buf.length,M},T=function(I){var E=g(h.length-1);return r(I,E,p)},F=function(I){for(var E=I.Fs,M=I.Fr,_=-Math.PI*(M/E)*2,C={re:0,im:0},l=0;l<h.length-1;l++)C=d.add(C,d.mul(f[l],{re:Math.cos(_*l),im:Math.sin(_*l)}));var L=d.magnitude(C);return{magnitude:L,phase:d.phase(C),dBmagnitude:20*Math.log(L)*Math.LOG10E}};return{responsePoint:function(I){return F(I)},response:function(I){I=I||100;var E=[],M=0,_=2*I;for(M=0;M<I;M++)E[M]=F({Fs:_,Fr:M});return o(E),E},simulate:function(I){return T(I)},singleStep:function(I){return p(I,v)},multiStep:function(I,E){return r(I,v,p,E)},filtfilt:function(I,E){return n(r(I,v,p,E),v,p,!0)},reinit:function(){v=g(h.length-1)}}};e.exports=i},{"./utils":9}],6:[function(a,e,t){"use strict";var c=function(){var r=function(o,i){var s=o.Q,h=o.Fc,f=o.Fs,u={},g=2*Math.PI*h/f;return o.BW?u.alpha=Math.sin(g)*Math.sinh(Math.log(2)/2*o.BW*g/Math.sin(g)):u.alpha=Math.sin(g)/(2*s),u.cw=Math.cos(g),u.a0=1+u.alpha,i.a0=u.a0,i.a.push(-2*u.cw/u.a0),i.k=1,i.a.push((1-u.alpha)/u.a0),u},n=function(o){var i=o.Q,s=o.Fc,h=o.Fs,f={},u=2*Math.PI*s/h;return f.alpha=Math.sin(u)/(2*i),f.cw=Math.cos(u),f.A=Math.pow(10,o.gain/40),f},d=function(){var o={};return o.z=[0,0],o.a=[],o.b=[],o};return{fromPZ:function(o){var i=d();return i.a0=1,i.b.push(1),i.b.push(-o.z0.re-o.z1.re),i.b.push(o.z0.re*o.z1.re-o.z0.im*o.z1.im),i.a.push(-o.p0.re-o.p1.re),i.a.push(o.p0.re*o.p1.re-o.p0.im*o.p1.im),o.type==="lowpass"?i.k=(1+i.a[0]+i.a[1])/(1+i.b[1]+i.b[2]):i.k=(1-i.a[0]+i.a[1])/(1-i.b[1]+i.b[2]),i},lowpassMZ:function(o){var i=d();i.a0=1;var s=o.as,h=o.bs,f=2*Math.PI*o.Fc/o.Fs,u=-s/(2*h);return i.a.push(2*-Math.pow(Math.E,u*f)*Math.cos(-f*Math.sqrt(Math.abs(Math.pow(s,2)/(4*Math.pow(h,2))-1/h)))),i.a.push(Math.pow(Math.E,2*u*f)),o.preGain?(i.b.push(1),i.k=i.a0+i.a[0]+i.a[1]):(i.b.push(i.a0+i.a[0]+i.a[1]),i.k=1),i.b.push(0),i.b.push(0),i},lowpassBT:function(o){var i=d();return o.Q=1,i.wp=Math.tan(2*Math.PI*o.Fc/(2*o.Fs)),i.wp2=i.wp*i.wp,o.BW&&delete o.BW,i.k=1,i.a0=3*i.wp+3*i.wp2+1,i.b.push(3*i.wp2*o.Q/i.a0),i.b.push(2*i.b[0]),i.b.push(i.b[0]),i.a.push((6*i.wp2-2)/i.a0),i.a.push((3*i.wp2-3*i.wp+1)/i.a0),i},highpassBT:function(o){var i=d();return o.Q=1,i.wp=Math.tan(2*Math.PI*o.Fc/(2*o.Fs)),i.wp2=i.wp*i.wp,o.BW&&delete o.BW,i.k=1,i.a0=i.wp+i.wp2+3,i.b.push(3*o.Q/i.a0),i.b.push(2*i.b[0]),i.b.push(i.b[0]),i.a.push((2*i.wp2-6)/i.a0),i.a.push((i.wp2-i.wp+3)/i.a0),i},lowpass:function(o){var i=d();o.BW&&delete o.BW;var s=r(o,i);return o.preGain?(i.k=.5*(1-s.cw),i.b.push(1/s.a0)):(i.k=1,i.b.push((1-s.cw)/(2*s.a0))),i.b.push(2*i.b[0]),i.b.push(i.b[0]),i},highpass:function(o){var i=d();o.BW&&delete o.BW;var s=r(o,i);return o.preGain?(i.k=.5*(1+s.cw),i.b.push(1/s.a0)):(i.k=1,i.b.push((1+s.cw)/(2*s.a0))),i.b.push(-2*i.b[0]),i.b.push(i.b[0]),i},allpass:function(o){var i=d();o.BW&&delete o.BW;var s=r(o,i);return i.k=1,i.b.push((1-s.alpha)/s.a0),i.b.push(-2*s.cw/s.a0),i.b.push((1+s.alpha)/s.a0),i},bandpassQ:function(o){var i=d(),s=r(o,i);return i.k=1,i.b.push(s.alpha*o.Q/s.a0),i.b.push(0),i.b.push(-i.b[0]),i},bandpass:function(o){var i=d(),s=r(o,i);return i.k=1,i.b.push(s.alpha/s.a0),i.b.push(0),i.b.push(-i.b[0]),i},bandstop:function(o){var i=d(),s=r(o,i);return i.k=1,i.b.push(1/s.a0),i.b.push(-2*s.cw/s.a0),i.b.push(i.b[0]),i},peak:function(o){var i=d(),s=n(o);return i.k=1,i.a0=1+s.alpha/s.A,i.a.push(-2*s.cw/i.a0),i.a.push((1-s.alpha/s.A)/i.a0),i.b.push((1+s.alpha*s.A)/i.a0),i.b.push(-2*s.cw/i.a0),i.b.push((1-s.alpha*s.A)/i.a0),i},lowshelf:function(o){var i=d();o.BW&&delete o.BW;var s=n(o);i.k=1;var h=2*Math.sqrt(s.A)*s.alpha;return i.a0=s.A+1+(s.A-1)*s.cw+h,i.a.push(-2*(s.A-1+(s.A+1)*s.cw)/i.a0),i.a.push((s.A+1+(s.A-1)*s.cw-h)/i.a0),i.b.push(s.A*(s.A+1-(s.A-1)*s.cw+h)/i.a0),i.b.push(2*s.A*(s.A-1-(s.A+1)*s.cw)/i.a0),i.b.push(s.A*(s.A+1-(s.A-1)*s.cw-h)/i.a0),i},highshelf:function(o){var i=d();o.BW&&delete o.BW;var s=n(o);i.k=1;var h=2*Math.sqrt(s.A)*s.alpha;return i.a0=s.A+1-(s.A-1)*s.cw+h,i.a.push(2*(s.A-1-(s.A+1)*s.cw)/i.a0),i.a.push((s.A+1-(s.A-1)*s.cw-h)/i.a0),i.b.push(s.A*(s.A+1+(s.A-1)*s.cw+h)/i.a0),i.b.push(-2*s.A*(s.A-1+(s.A+1)*s.cw)/i.a0),i.b.push(s.A*(s.A+1+(s.A-1)*s.cw-h)/i.a0),i},aweighting:function(o){var i=d();i.k=1;var s=2*Math.PI*o.Fc/o.Fs,h=2*Math.tan(s/2),f=o.Q,u=Math.pow(h,2);return i.a0=4*f+u*f+2*h,i.a.push(2*u*f-8*f),i.a.push(4*f+u*f-2*h),i.b.push(u*f),i.b.push(2*u*f),i.b.push(u*f),i}}};e.exports=c},{}],7:[function(a,e,t){"use strict";var c=a("./utils"),r=c.complex,n=c.runMultiFilter,d=c.runMultiFilterReverse,o=c.evaluatePhase,i=function(s){for(var h=s,f={re:1,im:0},u=[],g=[],v=0;v<h.length;v++){u[v]={};var p=h[v];u[v].b0={re:p.b[0],im:0},u[v].b1={re:p.b[1],im:0},u[v].b2={re:p.b[2],im:0},u[v].a1={re:p.a[0],im:0},u[v].a2={re:p.a[1],im:0},u[v].k={re:p.k,im:0},u[v].z=[0,0],g[v]={},g[v].b1=p.b[1]/p.b[0],g[v].b2=p.b[2]/p.b[0],g[v].a1=p.a[0],g[v].a2=p.a[1]}var T=function(m,S){var A=S*m.k.re-m.a1.re*m.z[0]-m.a2.re*m.z[1],w=m.b0.re*A+m.b1.re*m.z[0]+m.b2.re*m.z[1];return m.z[1]=m.z[0],m.z[0]=A,w},F=function(m,S){var A=m,w=0;for(w=0;w<S.length;w++)A=T(S[w],A);return A},I=function(m,S){var A=m.Fs,w=m.Fr,x=-Math.PI*(w/A)*2,G={re:Math.cos(x),im:Math.sin(x)},N=r.mul(S.k,r.add(S.b0,r.mul(G,r.add(S.b1,r.mul(S.b2,G))))),R=r.add(f,r.mul(G,r.add(S.a1,r.mul(S.a2,G)))),H=r.div(N,R);return{magnitude:r.magnitude(H),phase:r.phase(H)}},E=function(m){var S=0,A={magnitude:1,phase:0};for(S=0;S<u.length;S++){var w=I(m,u[S]);A.magnitude*=w.magnitude,A.phase+=w.phase}return A.dBmagnitude=20*Math.log(A.magnitude)*Math.LOG10E,A},M=function(){for(var m=[],S=0;S<h.length;S++)m[S]={b0:{re:p.b[0],im:0},b1:{re:p.b[1],im:0},b2:{re:p.b[2],im:0},a1:{re:p.a[0],im:0},a2:{re:p.a[1],im:0},k:{re:p.k,im:0},z:[0,0]};return m},_=function(m){var S=M();return n(m,S,F)},C=function(m,S){var A={},w=[],x=0;for(x=0;x<S;x++)w.push(m(x));A.out=_(w);var G=!1,N=!1;for(x=0;x<S-1;x++)if(A.out[x]>A.out[x+1]&&!G&&(G=!0,A.max={sample:x,value:A.out[x]}),G&&!N&&A.out[x]<A.out[x+1]){N=!0,A.min={sample:x,value:A.out[x]};break}return A},l=function(m,S){var A=Math.pow(m/2,2)-S;return A<0?[{re:-m/2,im:Math.sqrt(Math.abs(A))},{re:-m/2,im:-Math.sqrt(Math.abs(A))}]:[{re:-m/2+Math.sqrt(A),im:0},{re:-m/2-Math.sqrt(A),im:0}]},L=function(){for(var m=[],S=0;S<g.length;S++)m[S]={},m[S].z=l(g[S].b1,g[S].b2),m[S].p=l(g[S].a1,g[S].a2);return m};return{singleStep:function(m){return F(m,u)},multiStep:function(m,S){return n(m,u,F,S)},filtfilt:function(m,S){return d(n(m,u,F,S),u,F,!0)},simulate:function(m){return _(m)},stepResponse:function(m){return C(function(){return 1},m)},impulseResponse:function(m){return C(function(S){return S===0?1:0},m)},responsePoint:function(m){return E(m)},response:function(m){m=m||100;var S=[],A=0,w=2*m;for(A=0;A<m;A++)S[A]=E({Fs:w,Fr:A});return o(S),S},polesZeros:function(){return L()},reinit:function(){for(v=0;v<u.length;v++)u[v].z=[0,0]}}};e.exports=i},{"./utils":9}],8:[function(a,e,t){"use strict";var c=function(r){var n,d=r,o=[],i=function(u){for(n=0;n<u.steps;n++)o.push(d.singleStep((Math.random()-.5)*u.pp+u.offset))},s=function(u){var g=u.offset+u.pp,v=u.offset-u.pp;for(n=0;n<u.steps;n++)n%200<100?o.push(d.singleStep(g)):o.push(d.singleStep(v))},h=function(u){var g=u.offset+u.pp,v=u.offset-u.pp;for(n=0;n<u.steps;n++)n%100==0?o.push(d.singleStep(g)):o.push(d.singleStep(v))},f=function(u){var g=u.offset+u.pp,v=u.offset-u.pp,p=v,T=(g-v)/100;for(n=0;n<u.steps;n++)n%200<100?p+=T:p-=T,o.push(d.singleStep(p))};return{randomStability:function(u){for(d.reinit(),o.length=0,i(u),n=u.setup;n<o.length;n++)if(o[n]>u.maxStable||o[n]<u.minStable)return o[n];return!0},directedRandomStability:function(u){d.reinit(),o.length=0;var g;for(g=0;g<u.tests;g++){var v=Math.random();v<.25?i(u):v<.5?s(u):v<.75?h(u):f(u)}for(i(u),n=u.setup;n<o.length;n++)if(o[n]>u.maxStable||o[n]<u.minStable)return o[n];return!0},evaluateBehavior:function(){}}};e.exports=c},{}],9:[function(a,e,t){"use strict";t.evaluatePhase=function(o){var i=0,s=0,h=Math.PI,f=2*h,u=[];for(s=0;s<o.length;s++)u.push(o[s].phase);for(o[0].unwrappedPhase=o[0].phase,o[0].groupDelay=0,s=1;s<u.length;s++){var g=u[s]-u[s-1];if(g>h)for(i=s;i<u.length;i++)u[i]-=f;else if(g<-h)for(i=s;i<u.length;i++)u[i]+=f;u[s]<0?o[s].unwrappedPhase=-u[s]:o[s].unwrappedPhase=u[s],o[s].phaseDelay=o[s].unwrappedPhase/(s/o.length),o[s].groupDelay=(o[s].unwrappedPhase-o[s-1].unwrappedPhase)/(h/o.length),o[s].groupDelay<0&&(o[s].groupDelay=-o[s].groupDelay)}o[0].magnitude!==0?(o[0].phaseDelay=o[1].phaseDelay,o[0].groupDelay=o[1].groupDelay):(o[0].phaseDelay=o[2].phaseDelay,o[0].groupDelay=o[2].groupDelay,o[1].phaseDelay=o[2].phaseDelay,o[1].groupDelay=o[2].groupDelay)},t.runMultiFilter=function(o,i,s,h){var f=[];h&&(f=o);var u;for(u=0;u<o.length;u++)f[u]=s(o[u],i);return f},t.runMultiFilterReverse=function(o,i,s,h){var f=[];h&&(f=o);var u;for(u=o.length-1;u>=0;u--)f[u]=s(o[u],i);return f};var c=function(o,i){for(var s=!0;s;){var h=o,f=i;if(s=!1,f||(f=1),h!==Math.floor(h)||f!==Math.floor(f))return 1;if(h===0||h===1)return f;o=h-1,i=f*h,s=!0}};t.besselFactors=function(o){for(var i=[],s=0;s<o+1;s++){var h=c(2*o-s),f=Math.pow(2,o-s)*c(s)*c(o-s);i.unshift(Math.floor(h/f))}return i};var r=function(o,i){for(var s=0,h=0;h<i;h++){var f=1/Math.pow(2,h+1);o>f&&(o-=f,s+=f)}return s},n=function(o,i){return o&Math.pow(2,i)},d=function(o,i,s){var h=Math.abs(o),f=o-h;return{number:n(h,i).toString(),fraction:r(f,s).toString(),numberBits:i,fractionBits:s}};t.fixedPoint={convert:function(o,i,s){return d(o,i,s)},add:function(o,i){},sub:function(o,i){},mul:function(o,i){},div:function(o,i){}},t.complex={div:function(o,i){var s=o.re,h=o.im,f=i.re,u=i.im,g=f*f+u*u;return{re:(s*f+h*u)/g,im:(h*f-s*u)/g}},mul:function(o,i){var s=o.re,h=o.im,f=i.re,u=i.im;return{re:s*f-h*u,im:(s+h)*(f+u)-s*f-h*u}},add:function(o,i){return{re:o.re+i.re,im:o.im+i.im}},sub:function(o,i){return{re:o.re-i.re,im:o.im-i.im}},phase:function(o){return Math.atan2(o.im,o.re)},magnitude:function(o){return Math.sqrt(o.re*o.re+o.im*o.im)}}},{}]},{},[1])(1)})});var P=Kt(Jt(),1);var Ie=Kt(Jt(),1),yt="#ebebebcc",Pt="#5f5f5fcc",Ct="14px Arial";function be(a){return parseFloat(a.split("px")[0])}var Nt=class{timeseries;tsPresOpts;text;x=0;y=0;fillStyle;textBaseline="top";textAlign="start";font=Ct;on=!0;on_fillStyle;off_fillStyle=Pt;width=void 0;height=void 0;constructor(e,t,c,r="start",n=0,d=0,o=!0,i="top",s=Ct,h=void 0,f=void 0){this.timeseries=e,this.tsPresOpts=t,this.text=c,this.textAlign=r,this.x=n,this.y=d,this.on=o,this.fillStyle=t?.strokeStyle||(o?yt:Pt),this.textBaseline=i,this.font=s,h!==void 0?this.on_fillStyle=h:this.on&&(this.on_fillStyle=this.fillStyle),f!==void 0?this.off_fillStyle=f:this.on||(this.off_fillStyle=this.fillStyle),this.enable(o)}getHeight(){return this.height=be(this.font),this.height}getWidth(e){let t=e.getContext("2d");return t&&(t.save(),t.textBaseline=this.textBaseline,t.textAlign=this.textAlign,t.font=this.font,t.fillStyle=this.fillStyle,this.width=t.measureText(this.text).width,t.restore()),this.width}enable(e=!0){this.on=e,this.fillStyle=this.on?this.on_fillStyle:this.off_fillStyle}onclick(){this.on=!this.on,this.enable(this.on)}};function Ae(a,e,t,c,r,n){return a>t&&a<t+c&&e>r&&e<r+n}var mt=class extends Ie.SmoothieChart{smoothieTSInfos;isRow=!0;enableRenderLegend=!0;allowToggleTooltip=!0;allowToggleLegend=!0;allowToggleLabelAuto=!0;ctrlFont=Ct;ctrlFontHeight=0;enableTooltipText="[Tooltip]";enableTooltipTextX=0;enableTooltipTextY=0;enableTooltipTextWidth=0;yAutoScaleText="[Auto Y scale]";yAutoScaleTextX=0;yAutoScaleTextY=0;yAutoScaleTextWidth=0;defaultXSpacing=10;defaultYSpacing=0;renderOffset=0;prevMinValue=void 0;prevMaxValue=void 0;scrollable=!1;constructor(e,t=!0,c=!0,r=!0,n=!0,d=!0,o=Ct,i=10,s=0,h=!1){super(e),this.smoothieTSInfos=[],this.isRow=t,this.enableRenderLegend=c,this.allowToggleTooltip=r,this.allowToggleLegend=n,this.allowToggleLabelAuto=d,this.ctrlFont=o,this.defaultXSpacing=i,this.defaultYSpacing=s,this.ctrlFontHeight=be(this.ctrlFont),this.scrollable=h}canvasOnClick=e=>{if(this.allowToggleLegend&&"canvas"in this){let t=this.canvas;this.allowToggleTooltip&&this.options.tooltip!==void 0&&Ae(e.offsetX,e.offsetY,this.enableTooltipTextX,this.enableTooltipTextWidth,this.enableTooltipTextY,this.ctrlFontHeight)&&(this.options.tooltip?(this.options.tooltip=!1,"tooltipEl"in this&&(this.tooltipEl.style.display="none")):this.options.tooltip=!0),this.allowToggleLabelAuto&&Ae(e.offsetX,e.offsetY,this.yAutoScaleTextX,this.yAutoScaleTextWidth,this.yAutoScaleTextY,this.ctrlFontHeight)&&(this.yScaleIsAuto()?(this.options.minValue=this.prevMinValue||this?.valueRange?.min||20,this.options.maxValue=this.prevMaxValue||this?.valueRange?.max||-20,this.updateValueRange(),this.showScrollMessage()):(this.prevMinValue=this.options.minValue,this.prevMaxValue=this.options.maxValue,this.options.minValue=void 0,this.options.maxValue=void 0,this.updateValueRange()));for(let c=0;c<this.smoothieTSInfos.length;c++){let r=this.smoothieTSInfos[c],n=r.width||r.getWidth(t)||0,d=r.height||r.getHeight()||0;n>0&&d>0&&e.offsetX-this.renderOffset>r.x&&e.offsetX-this.renderOffset<r.x+n&&e.offsetY>r.y&&e.offsetY<r.y+d&&(r.onclick(),r.on?r.timeseries!==void 0&&this.addTimeSeries(r.timeseries,r.tsPresOpts):r.timeseries!==void 0&&this.removeTimeSeries(r.timeseries))}}};yScaleIsAuto(){return this.options.minValue===void 0||this.options.maxValue===void 0}streamTo(e,t){if(super.streamTo(e,t),"canvas"in this){let c=this.canvas;c.removeEventListener("click",this.canvasOnClick),c.addEventListener("click",this.canvasOnClick)}}render(e,t){if(super.render(e,t),this.enableRenderLegend&&this.smoothieTSInfos.length){let c=this.lastRenderTimeMillis;Date.now()-c<3&&this.renderLegend(e)}}renderLegend(e){let t=e.getContext("2d");if(t){t.save();let c=this.smoothieTSInfos,r=this.defaultXSpacing;this.allowToggleTooltip&&(t.textBaseline="top",t.textAlign="start",t.font=this.ctrlFont,t.fillStyle=this.options.tooltip?yt:Pt,t.fillText(this.enableTooltipText,r,this.defaultYSpacing),this.enableTooltipTextX=r,this.enableTooltipTextY=this.defaultYSpacing,this.enableTooltipTextWidth=t.measureText(this.enableTooltipText).width,r+=this.enableTooltipTextWidth+this.defaultXSpacing),this.allowToggleLabelAuto&&(t.textBaseline="top",t.textAlign="start",t.font=this.ctrlFont,t.fillStyle=yt,t.fillStyle=this.yScaleIsAuto()?yt:Pt,t.fillText(this.yAutoScaleText,r,this.defaultYSpacing),this.yAutoScaleTextX=r,this.yAutoScaleTextY=this.defaultYSpacing,this.yAutoScaleTextWidth=t.measureText(this.yAutoScaleText).width,r+=this.yAutoScaleTextWidth+this.defaultXSpacing),this.renderOffset=r;let n=0;for(let d=0;d<c.length;d++){if(d>0){if(this.isRow&&c[d].x===c[0].x)c[d].x=c[d-1].x+n+this.defaultXSpacing;else if(!this.isRow&&c[d].y===c[0].y){let i=parseFloat(c[d].font.split("px")[0]);c[d].y=c[d-1].y+i+2}}let o=c[d];t.textBaseline=o.textBaseline,t.textAlign=o.textAlign,t.font=o.font,t.fillStyle=o.fillStyle,o.timeseries===void 0&&o.tsPresOpts===void 0?t.fillText(o.text,o.x,o.y):t.fillText(o.text,r+o.x,o.y),n=t.measureText(o.text).width}t.restore()}}addSmoothieTSInfo(e){this.smoothieTSInfos.indexOf(e)<0&&(this.smoothieTSInfos.push(e),e.timeseries!==void 0&&e.tsPresOpts!==void 0&&this.addTimeSeries(e.timeseries,e.tsPresOpts))}removeLegendTSInfo(e){let t=this.smoothieTSInfos.indexOf(e);return t>-1?(e.timeseries!==void 0&&this.removeTimeSeries(e.timeseries),this.smoothieTSInfos.splice(t,1)):[]}clearLegendTSInfos(){for(let e=0;e<this.smoothieTSInfos.length;e++){let t=this.smoothieTSInfos[e];t.timeseries!==void 0&&this.removeTimeSeries(t.timeseries)}this.smoothieTSInfos=[]}configureTimeSeries(e,t,c,r=!1,n=void 0,d=void 0,o=1,i=1,s="",h=!1,f=[],u=!0,g=!1,v=!0){this.clearLegendTSInfos();for(let p=0;p<e.length;p++){let T=new Nt(e[p],t[p],c[p].legend,c[p].textAlign,c[p].x,c[p].y,!0,c[p].textBaseline,c[p].font);this.addSmoothieTSInfo(T)}this.scrollable=r,this.showScrollMessage(),this.options.minValue=n,this.options.maxValue=d,this.options.minValueScale=o,this.options.maxValueScale=i,this.updateValueRange(),s.length>0&&this.options.title!==void 0&&(this.options.title.text=s),this.options.labels!==void 0&&(this.options.labels.disabled=h),this.options.horizontalLines=f,this.allowToggleLegend=u,this.allowToggleLabelAuto=g,this.allowToggleTooltip=v}showScrollMessage(){if(this.scrollable&&"canvas"in this){let e=this.canvas,t=new Nt(void 0,void 0,"Scroll to change y-range","center",e.width/window.devicePixelRatio/2,30,!0,"top","16px Arial","#fbfbfb");this.addSmoothieTSInfo(t),setTimeout(()=>{this.removeLegendTSInfo(t)},1500)}}};function y(a,e=10,t=5,c="top",r="start",n=Ct){return{legend:a,x:e,y:t,textBaseline:c,textAlign:r,font:n}}var O=Kt(we(),1);var Ni="fb005c80-02e7-f387-1cad-8acd2d8df0c8",Oi="fb005c81-02e7-f387-1cad-8acd2d8df0c8",Hi="fb005c82-02e7-f387-1cad-8acd2d8df0c8",ie=(a=>(a[a.SAMPLE_RATE=0]="SAMPLE_RATE",a[a.RESOLUTION=1]="RESOLUTION",a[a.RANGE_PN_UNIT=2]="RANGE_PN_UNIT",a[a.RANGE_MILI_UNIT=3]="RANGE_MILI_UNIT",a[a.NUM_CHANNELS=4]="NUM_CHANNELS",a[a.CONVERSION_FACTOR=5]="CONVERSION_FACTOR",a))(ie||{});function ee(a,e,t=!0){return a.getUint16(e,t)}function Bi(a,e,t=!0){return a.getFloat32(e,t)}function Vi(a,e,t=!0){return[a.getUint16(e,t),a.getUint16(e+2,t),a.getUint16(e+4,t),a.getUint16(e+6,t)]}var ki={SAMPLE_RATE:ee,RESOLUTION:ee,RANGE_PN_UNIT:ee,RANGE_MILI_UNIT:Vi,CONVERSION_FACTOR:Bi},Xi={SAMPLE_RATE:2,RESOLUTION:2,RANGE_PN_UNIT:2,RANGE_MILI_UNIT:8,NUM_CHANNELS:1,CONVERSION_FACTOR:4},ne=(a=>(a[a.GET_MEASUREMENT_SETTINGS=1]="GET_MEASUREMENT_SETTINGS",a[a.REQUEST_MEASUREMENT_START=2]="REQUEST_MEASUREMENT_START",a[a.REQUEST_MEASUREMENT_STOP=3]="REQUEST_MEASUREMENT_STOP",a))(ne||{}),lt=["SUCCESS","INVALID OP CODE","INVALID MEASUREMENT TYPE","NOT SUPPORTED","INVALID LENGTH","INVALID PARAMETER","ALREADY IN STATE","INVALID RESOLUTION","INVALID SAMPLE RATE","INVALID RANGE","INVALID MTU","INVALID NUMBER OF CHANNELS","INVALID STATE","DEVICE IN CHARGER"],Y=(a=>(a[a.ECG=0]="ECG",a[a.PPG=1]="PPG",a[a.ACC=2]="ACC",a[a.PPI=3]="PPI",a[a.GYRO=5]="GYRO",a[a.MAGNETOMETER=6]="MAGNETOMETER",a[a.SDK_MODE=9]="SDK_MODE",a[a.LOCATION=10]="LOCATION",a[a.PRESSURE=11]="PRESSURE",a[a.TEMPERATURE=12]="TEMPERATURE",a))(Y||{}),ln=Object.keys(ie).filter(a=>isNaN(Number(a))),Ot=Object.keys(Y).filter(a=>isNaN(Number(a))),cn=Object.keys(ne).filter(a=>isNaN(Number(a))),Fe=class{device;server=void 0;PMDService=void 0;PMDCtrlChar=void 0;PMDDataChar=void 0;BattService=void 0;BattLvlChar=void 0;streaming=!1;verbose=!0;dataHandle={};timeOffset=BigInt(0);eventTimeOffset;lastECGTimestamp;lastACCTimestamp;ACCStarted=!1;ECGStarted=!1;constructor(a,e=!0){this.device=a,this.verbose=e,this.lastECGTimestamp=0,this.lastACCTimestamp=0,this.ACCStarted=!1,this.ECGStarted=!1;for(let t=0;t<Ot.length;t++)this.dataHandle[Ot[t]]=[]}addEventListener(a,e){this.dataHandle[a].includes(e)||this.dataHandle[a].push(e)}removeEventListener(a,e){let t=this.dataHandle[a].indexOf(e);return t>-1&&this.dataHandle[a].splice(t,1),t}clearEventListner(a){delete this.dataHandle[a],this.dataHandle[a]=[]}log(...a){this.verbose&&console.log(...a)}async init(){this.server=await this.device.gatt?.connect(),this.log(`Connecting to ${this.device.name} GATT server...`),this.PMDService=await this.server?.getPrimaryService(Ni),this.log("  Got PMD Service"),this.PMDCtrlChar=await this.PMDService?.getCharacteristic(Oi),this.log("    Got PMD control characteristic"),await this.PMDCtrlChar?.startNotifications(),this.log("    Start notification"),this.PMDDataChar=await this.PMDService?.getCharacteristic(Hi),this.log("    Got PMD data characteristic"),await this.PMDDataChar?.startNotifications(),this.log("    Start notification"),this.streaming=!1,this.BattService=await this.server?.getPrimaryService("battery_service"),this.log("  Got battery Service"),this.BattLvlChar=await this.BattService?.getCharacteristic("battery_level"),this.log("    Got battery level characteristic"),this.PMDDataChar?.addEventListener("characteristicvaluechanged",this.PMDDataHandle.bind(this))}PMDCtrlCharHandle(a){this.log(a)}PMDCtrlDataHandle(a){this.log(a)}async getBatteryLevel(){let a=await this.BattLvlChar?.readValue();return a?a.getUint8(0):0}async getPMDFeatures(){let a=await this.PMDCtrlChar?.readValue(),e=[];if(a!==void 0&&a.byteLength===17&&a.getUint8(0)===15){let t=a.getUint8(1);for(let c=0;c<Ot.length;c++){let r=Ot[c];t>>Y[r]&1&&e.push(r)}}return e}async getSensorSettingsFromName(a){return this.getSensorSettingsFromId(Y[a])}parseSensorSettings(a){if(a.getUint8(0)==240&&a.getUint8(1)==1){let e={type:Y[a.getUint8(2)],error:lt[a.getUint8(3)],more_frames:a.getUint8(4),settings:{}},t=5;for(;t<a.byteLength;){let c=a.getUint8(t);t+=1;let r=a.getUint8(t);t+=1;let n=ie[c];e.settings[n]=[];for(let d=0;d<r;d++)e.settings[n].push(ki[n](a,t)),t+=Xi[n]}return e}}async getSensorSettingsFromId(a){if(!this.streaming){let e,t=new Promise((n,d)=>{e=n}),c=n=>{let d=n?.target?.value;e(this.parseSensorSettings(d))};this.PMDCtrlChar?.addEventListener("characteristicvaluechanged",c,{once:!0});let r=new Uint8Array([1,a]);return await this.PMDCtrlChar?.writeValue(r),await t}}PMDDataHandle(a){let e=a.target.value,t=e.getBigUint64(1,!0);this.timeOffset===BigInt(0)&&(this.timeOffset=t,this.eventTimeOffset=a.timeStamp+performance.timeOrigin);let c=Number(t-this.timeOffset)/1e6,r=e.getUint8(0),n=e.getUint8(9),d={type:Y[r],sample_timestamp_ms:c,prev_sample_timestamp_ms:0,recv_epoch_time_ms:a.timeStamp+performance.timeOrigin,event_time_offset_ms:this.eventTimeOffset};switch(r){case 2:n==1&&(d.samples=new Int16Array(e.buffer.slice(10)),d.prev_sample_timestamp_ms=this.lastACCTimestamp,this.lastACCTimestamp=c);break;case 0:if(n===0){let o=Math.floor((e.byteLength-10)/3);d.samples=new Int32Array(o);for(let i=10;i<e.byteLength;i+=3){let s=e.getUint8(i+2)<<16|e.getUint8(i+1)<<8|e.getUint8(i);s&8388608&&(s|=4278190080),d.samples[Math.floor((i-10)/3)]=s}d.prev_sample_timestamp_ms=this.lastECGTimestamp,this.lastECGTimestamp=c}break}for(let o of this.dataHandle[Y[r]])o(d)}parseCtrlReply(a){if(a.getUint8(0)===240){let e=a.getUint8(1);if(e===2||e===3){let t={type:ne[e],sensor:Y[a.getUint8(2)],error:lt[a.getUint8(3)],more_frames:a.getUint8(4)};return a.byteLength>5&&(t.reserved=a.getUint8(5)),t}}}async startACC(a=4,e=100,t=16){if(this.ACCStarted)return;let c,r=new Promise((s,h)=>{c=s}),n=s=>{this.log("PMDSensorSettingHandle");let h=s?.target?.value;c(this.parseCtrlReply(h))};this.PMDCtrlChar?.addEventListener("characteristicvaluechanged",n,{once:!0});let d=new Uint8Array(14),o=new DataView(d.buffer);d[0]=2,d[1]=2,d[2]=2,d[3]=1,o.setUint16(4,a,!0),d[6]=0,d[7]=1,o.setUint16(8,e,!0),d[10]=1,d[11]=1,o.setUint16(12,t,!0),await this.PMDCtrlChar?.writeValue(d);let i=await r;return i?.error===lt[0]&&(this.ACCStarted=!0),i}async startECG(a=130,e=14){if(this.ECGStarted)return;let t,c=new Promise((i,s)=>{t=i}),r=i=>{this.log("PMDSensorSettingHandle");let s=i?.target?.value;t(this.parseCtrlReply(s))};this.PMDCtrlChar?.addEventListener("characteristicvaluechanged",r,{once:!0});let n=new Uint8Array(10),d=new DataView(n.buffer);n[0]=2,n[1]=0,n[2]=1,n[3]=1,d.setUint16(4,e,!0),n[6]=0,n[7]=1,d.setUint16(8,a,!0),await this.PMDCtrlChar?.writeValue(n);let o=await c;return o?.error===lt[0]&&(this.ECGStarted=!0),o}async stopECG(){if(!this.ECGStarted)return;let a=await this.stopSensor(0);return a?.error===lt[0]&&(this.ECGStarted=!1),a}async stopACC(){if(!this.ACCStarted)return;let a=await this.stopSensor(2);return a?.error===lt[0]&&(this.ACCStarted=!1),a}async stopSensor(a){let e,t=new Promise((n,d)=>{e=n}),c=n=>{let d=n?.target?.value;e(this.parseCtrlReply(d))};this.PMDCtrlChar?.addEventListener("characteristicvaluechanged",c,{once:!0});let r=new Uint8Array(2);return r[0]=3,r[1]=a,await this.PMDCtrlChar?.writeValue(r),await t}};var Le=["","LShoulder","RShoulder","Chest","MiddleSpine","LowerSpine","Hip","LThigh","RThigh"],zi=new Date("2000-01-01T00:00:00Z"),Wi=new Date("2018-01-01T00:00:00Z"),Ui=zi.valueOf(),Yi=BigInt(Ui)*BigInt(1e6),qi=Wi.valueOf(),Zi=BigInt(qi)*BigInt(1e6),xe=Zi-Yi,$i=xe/BigInt(1e6),Me=Number(xe-$i*BigInt(1e6))/1e6,un=Me+Number(Me);var gt=5,Re=35,De=600,Ge=-120,se=120,ye=0,re=120,Ht=25,et=1,it=20,Pe=4,ct=130,Ne=5,Oe=5,ae=1,Bt=20,Vt=800,He=10,kt=200,Be=Math.round(ct/(1e3/kt)),z=.7,nt=40,q=.1,V=.1,J=100,st=.1,Ve=600,Xt=[2,4,8],ht=[25,50,100,200],oe=100,le=4,ce=-2e3,zt=2e3,ke=10,Xe=4;var he=10,ze=100,Z=2.5,tt=.1;var We=4,Ue=-1e3,de=1e3,ue=1,Ye=1,St=8,vt=0,Et=800,qe=1,At=1,It=30,Ze=.1,bt=0,Tt=800,$e=1,wt=1,Ft=30,Qe=.1,fe={limitFPS:60,grid:{strokeStyle:"#484f58",fillStyle:"#000000",lineWidth:1,millisPerLine:1e3,borderVisible:!1},title:{text:"EXG raw voltage (0.7\u201340 Hz)",fontFamily:"Arial",verticalAlign:"bottom",fillStyle:"#ffffff80",fontSize:14},responsive:!1,nonRealtimeData:!0,millisPerPixel:St,scaleSmoothing:.1,tooltip:!1,minValueScale:1,maxValueScale:1},pe={limitFPS:60,minValue:ce,maxValue:zt,grid:{strokeStyle:"#484f58",fillStyle:"#000000",lineWidth:1,millisPerLine:1e3,borderVisible:!1},title:{text:"Accelerometer raw",fontFamily:"Arial",verticalAlign:"bottom",fillStyle:"#ffffff80",fontSize:14},labels:{disabled:!1},responsive:!1,nonRealtimeData:!0,millisPerPixel:St,scaleSmoothing:.1,tooltip:!1,minValueScale:1,maxValueScale:1},je={lineWidth:2,interpolation:"linear",strokeStyle:"#fbfbfbcc"},Ke={lineWidth:2,interpolation:"linear",strokeStyle:"#ffdcaacc"},Je={lineWidth:2,interpolation:"linear",strokeStyle:"#dcaaffcc",fillStyle:"#f0beff99"},ti={lineWidth:2,interpolation:"linear",strokeStyle:"#ff453acc"},ei={lineWidth:2,interpolation:"linear",strokeStyle:"#32ff4bcc"},ii={lineWidth:2,interpolation:"linear",strokeStyle:"#0a84ffcc"},ni={lineWidth:2,interpolation:"linear",strokeStyle:"#ff776ccc"},si={lineWidth:2,interpolation:"linear",strokeStyle:"#64ff7dcc"},ri={lineWidth:2,interpolation:"linear",strokeStyle:"#3cb6ffcc"},ai={lineWidth:2,interpolation:"linear",strokeStyle:"#6effffcc"},oi={lineWidth:2,interpolation:"linear",strokeStyle:"#ff70ffcc"},li={lineWidth:2,interpolation:"linear",strokeStyle:"#ffff78cc"},ci={lineWidth:2,interpolation:"linear",strokeStyle:"#fbfbfbcc"},hi={lineWidth:2,interpolation:"linear",strokeStyle:"#ffdcaacc"},di={lineWidth:2,interpolation:"linear",strokeStyle:"#f0883e"},ui={lineWidth:2,interpolation:"linear",strokeStyle:"#f778ba"},fi={lineWidth:2,interpolation:"linear",strokeStyle:"#388afd"},pi={lineWidth:2,interpolation:"linear",strokeStyle:"#aadcffcc"},_i=(h=>(h[h.ECG=0]="ECG",h[h.PPG=1]="PPG",h[h.ACC=2]="ACC",h[h.PPI=3]="PPI",h[h.GYRO=5]="GYRO",h[h.MAGNETOMETER=6]="MAGNETOMETER",h[h.SDK_MODE=9]="SDK_MODE",h[h.LOCATION=10]="LOCATION",h[h.PRESSURE=11]="PRESSURE",h[h.TEMPERATURE=12]="TEMPERATURE",h))(_i||{}),fn=Object.keys(_i).filter(a=>isNaN(Number(a))),rt=["lowpass","highpass","bandpass"],$=["butterworth","bessel"];var Wt=new O.CalcCascades;async function Ei(a,e){await new Yt(a,e).init()}var Yt=class a{static polarRowID=0;static polarVisRows=[];device;polarH10;deviceName;battLvl;parent;polarSensorDiv;optionDiv;deviceInfoDiv;nameDiv;loadingDiv;disconnectDiv;deviceNameDiv;battLvlDiv;dataInfo;bodypartLabel;bodypartSelectDiv;bodypartSelect;dataCtrl;extraDataCtrl;rowOrder;visContainerDiv;visConfigDiv;ECGConfigDiv;ECGChartConfigDiv;ECGFilterConfigDiv;ECGRMSConfigDiv;customBodyPartInput;ACCConfigDiv;ACCChartConfigDiv;ACCLPConfigDiv;ACCFilterConfigDiv;ECGCtrlDiv;ACCCtrlDiv;order;ECG_FILTER_MIN=Ge;ECG_FILTER_MAX=se;ECG_RMS_MIN=ye;ECG_RMS_MAX=re;ACC_MIN=ce;ACC_MAX=zt;ACC_FILTER_MIN=Ue;ACC_FILTER_MAX=de;disBtn;orderUpBtn;orderDownBtn;show3DBtn;filterConfigBtn;ECGFormSelect;ECGSwitchInput;ECGDropDown;ACCFormSelect;ACCSwitchInput;ACCDropDown;ECGDiv=void 0;ACCDiv=void 0;ECGStreamDelayInput=void 0;ECGstreamMPPInput=void 0;ECGRMSWinInput=void 0;ACCStreamDelayInput=void 0;ACCstreamMPPInput=void 0;ecg_resize=void 0;ecg_chart=void 0;ecg_resize_observer=void 0;ecg_canvas=void 0;ecg_filter_iir_coef=void 0;ecg_ts=void 0;ecg_filter_info;ecg_filter_iir=void 0;ecg_filter_ts=void 0;ecg_rms_ts=void 0;ecg_mss_win=void 0;ecg_mss_win_i=0;ecg_buf_head=0;ecg_mss=0;acc_resize=void 0;acc_chart=void 0;acc_resize_observer=void 0;acc_canvas=void 0;acc_x_ts=void 0;acc_y_ts=void 0;acc_z_ts=void 0;acc_mag_ts=void 0;acc_lp_info;acc_lp_iir_coef=void 0;acc_x_lp_iir=void 0;acc_y_lp_iir=void 0;acc_z_lp_iir=void 0;acc_mag_lp_iir=void 0;acc_x_lp_ts=void 0;acc_y_lp_ts=void 0;acc_z_lp_ts=void 0;acc_mag_lp_ts=void 0;acc_rho_ts=void 0;acc_phi_ts=void 0;acc_theta_ts=void 0;acc_filter_info;acc_filter_iir_coef=void 0;acc_x_filter_iir=void 0;acc_y_filter_iir=void 0;acc_z_filter_iir=void 0;acc_mag_filter_iir=void 0;acc_x_filter_ts=void 0;acc_y_filter_ts=void 0;acc_z_filter_ts=void 0;acc_mag_filter_ts=void 0;ecg_rms_window_ms=kt;ecg_rms_window_size=Be;ecg_stream_delay=De;acc_stream_delay=Ve;ecg_millis_per_px=St;acc_millis_per_px=St;showVisConfig=!1;customBodyPart="";customBodyPartSpan=void 0;acc_range_options=void 0;acc_sample_rate_options=void 0;acc_range_g=le;acc_sample_rate_hz=oe;ACCSampleRateSelect=void 0;ACCRangeSelect=void 0;ECGFilterTypesSelect=void 0;ECGFilteCharSelect=void 0;ECGFilterOrderInput=void 0;ECGFilterCutoffInput=void 0;ECGFilterHighCutInput=void 0;ECGFilterLowCutInput=void 0;ACCFilterTypesSelect=void 0;ACCFilterCharSelect=void 0;ACCFilterOrderInput=void 0;ACCFilterCutoffInput=void 0;ACCFilterHighCutInput=void 0;ACCFilterLowCutInput=void 0;ACCLPCharSelect=void 0;ACCLPOrderInput=void 0;ACCLPCutoffInput=void 0;constructor(e,t){if(t.name===void 0)throw new Error("Invalid Bluetooth device! Missing name");this.parent=e,this.device=t,this.deviceName=this.device?.name?.substring(10)||"",this.ecg_rms_window_ms=kt,this.updateECGRMSWinSize(),this.initFilterSettings(),this.showVisConfig=!1}updateECGRMSWinSize(){this.ecg_rms_window_size=Math.round(ct/(1e3/this.ecg_rms_window_ms))}updateECGRMSWin(){this.ecg_mss_win_i=0,this.ecg_buf_head=0,this.ecg_mss=0,this.ecg_mss_win=new Float64Array(this.ecg_rms_window_ms)}initECGFilterSettings(){this.ecg_filter_info={type:"highpass",order:Pe,characteristic:"butterworth",Fs:ct,Fc:Ht,Fl:et,Fh:it,BW:it-et,gain:void 0,preGain:!1}}initACCLowpassFilterSettings(){this.acc_lp_info={type:"lowpass",order:Xe,characteristic:"butterworth",Fs:this.acc_sample_rate_hz,Fc:ke,Fl:1,Fh:10,BW:void 0,gain:void 0,preGain:!1}}initACCFilterSettings(){this.acc_filter_info={type:"bandpass",order:We,characteristic:"butterworth",Fs:this.acc_sample_rate_hz,Fc:Math.sqrt(tt*Z),Fl:tt,Fh:Z,BW:Z-tt,gain:void 0,preGain:!1}}initFilterSettings(){this.initECGFilterSettings(),this.initACCLowpassFilterSettings(),this.initACCFilterSettings()}updateBandpass(e){e.Fh!==void 0&&e.Fl!=null&&(e.BW=e.Fh-e.Fl,e.Fc=Math.sqrt(e.Fh*e.Fl))}disconnectPolarH10=async(e=void 0)=>{this.removeSelf(),this.ecg_chart!==void 0&&this.ecg_chart.stop(),this.ecg_resize_observer!==void 0&&this.ecg_resize_observer.disconnect(),this.ECGDiv!==void 0&&(this.visContainerDiv?.removeChild(this.ECGDiv),this.polarH10.removeEventListener("ECG",this.newECGCallback),await this.stopECG()),this.resetECG(),this.acc_chart!==void 0&&this.acc_chart.stop(),this.acc_resize_observer!==void 0&&this.acc_resize_observer.disconnect(),this.ACCDiv!==void 0&&(this.visContainerDiv?.removeChild(this.ACCDiv),this.polarH10.removeEventListener("ACC",this.newACCCallback),await this.stopAcc()),this.resetACC(),this.disconnectPolarH10IfAlone()};async init(){try{await this.initPolarH10(),await this.initDeviceInfo(),await this.initDeviceGraphCtrl(),a.polarRowID+=1,a.polarVisRows.push(this)}catch(e){this.disconnectPolarH10(),alert(e)}}moveUp=e=>{this.order-=1,this.polarSensorDiv.style.order=this.order.toString();let t=a.polarVisRows[this.order];t.order+=1,t.polarSensorDiv.style.order=t.order.toString(),a.polarVisRows[this.order]=this,a.polarVisRows[t.order]=t,this.order===0?(this.orderUpBtn.disabled=!0,this.orderDownBtn.disabled=!1,t.orderUpBtn.disabled=!1):this.order===a.polarVisRows.length-2&&(this.orderDownBtn.disabled=!1),t.order===a.polarVisRows.length-1&&(t.orderDownBtn.disabled=!0,t.orderUpBtn.disabled=!1)};moveDown=e=>{this.order+=1,this.polarSensorDiv.style.order=this.order.toString();let t=a.polarVisRows[this.order];t.order-=1,t.polarSensorDiv.style.order=t.order.toString(),a.polarVisRows[this.order]=this,a.polarVisRows[t.order]=t,this.order===a.polarVisRows.length-1?(this.orderUpBtn.disabled=!1,this.orderDownBtn.disabled=!0,t.orderDownBtn.disabled=!1):this.order===1&&(this.orderUpBtn.disabled=!1),t.order===0&&(t.orderDownBtn.disabled=!1,t.orderUpBtn.disabled=!0)};toggleVisConfig=e=>{this.showVisConfig=!this.showVisConfig,this.showVisConfig?(this.visContainerDiv.classList.add("hide"),this.visConfigDiv.classList.remove("hide"),this.filterConfigBtn.classList.add("btn-success")):(this.visContainerDiv.classList.remove("hide"),this.visConfigDiv.classList.add("hide"),this.filterConfigBtn.classList.remove("btn-success"))};newECGCallback=e=>{if(this.ecg_ts!==void 0&&this.ecg_rms_ts!==void 0&&this.ecg_filter_ts!==void 0&&e.prev_sample_timestamp_ms>0&&e.samples!==void 0&&this.ecg_filter_iir!==void 0){let t=(e.sample_timestamp_ms-e.prev_sample_timestamp_ms)/e.samples.length,c=e.event_time_offset_ms+e.prev_sample_timestamp_ms+t;for(let r=0;r<e.samples.length;r++){let n=r*t,d=c+n,o=e.samples[r],i=this.ecg_filter_iir.singleStep(o),s=i/this.ecg_rms_window_size*i,h;this.ecg_mss_win!==void 0&&(this.ecg_mss+=s,this.ecg_mss_win_i<this.ecg_rms_window_size?(this.ecg_mss_win[this.ecg_mss_win_i]=s,this.ecg_mss_win_i++):(this.ecg_mss-=this.ecg_mss_win[this.ecg_buf_head],this.ecg_mss_win[this.ecg_buf_head]=s,this.ecg_buf_head=(this.ecg_buf_head+1)%this.ecg_rms_window_size),this.ecg_mss_win_i===this.ecg_rms_window_size&&(h=Math.sqrt(this.ecg_mss))),setTimeout(()=>{this.ecg_ts?.append(d,o),this.ecg_filter_ts?.append(d,i),h!==void 0&&this.ecg_rms_ts?.append(d,h)},n)}}};newACCCallback=e=>{if(e.prev_sample_timestamp_ms>0&&e.samples!==void 0&&this.acc_x_ts!==void 0&&this.acc_y_ts!==void 0&&this.acc_z_ts!==void 0&&this.acc_mag_ts!==void 0&&this.acc_x_lp_ts!==void 0&&this.acc_y_lp_ts!==void 0&&this.acc_z_lp_ts!==void 0&&this.acc_mag_lp_ts!==void 0&&this.acc_rho_ts!==void 0&&this.acc_phi_ts!==void 0&&this.acc_theta_ts!==void 0&&this.acc_x_filter_ts!==void 0&&this.acc_y_filter_ts!==void 0&&this.acc_z_filter_ts!==void 0&&this.acc_mag_filter_ts!==void 0&&this.acc_x_lp_iir!==void 0&&this.acc_y_lp_iir!==void 0&&this.acc_z_lp_iir!==void 0&&this.acc_mag_lp_iir!==void 0&&this.acc_x_filter_iir!==void 0&&this.acc_y_filter_iir!==void 0&&this.acc_z_filter_iir!==void 0&&this.acc_mag_filter_iir!==void 0){let t=e.samples.length/3,c=(e.sample_timestamp_ms-e.prev_sample_timestamp_ms)/t,r=e.event_time_offset_ms+e.prev_sample_timestamp_ms+c;for(let n=0;n<e.samples.length;n+=3){let o=Math.floor(n/3)*c,i=r+o,s=-e.samples[n],h=-e.samples[n+1],f=e.samples[n+2],u=this.acc_x_lp_iir.singleStep(h),g=this.acc_y_lp_iir.singleStep(s),v=this.acc_z_lp_iir.singleStep(f),p=u*u,T=g*g,F=v*v,I=Math.atan(u/Math.sqrt(T+F))/Math.PI*180,E=Math.atan(g/Math.sqrt(p+F))/Math.PI*180,M=Math.atan(Math.sqrt(p+T)/v)/Math.PI*180,_=Math.sqrt(h*h+s*s+f*f),C=this.acc_mag_lp_iir.singleStep(_),l=this.acc_x_filter_iir.singleStep(h),L=this.acc_y_filter_iir.singleStep(s),m=this.acc_z_filter_iir.singleStep(f),S=this.acc_mag_filter_iir.singleStep(_);setTimeout(()=>{this.acc_x_ts?.append(i,h),this.acc_y_ts?.append(i,s),this.acc_z_ts?.append(i,f),this.acc_mag_ts?.append(i,_),this.acc_rho_ts?.append(i,I),this.acc_phi_ts?.append(i,E),this.acc_theta_ts?.append(i,M),this.acc_x_lp_ts?.append(i,u),this.acc_y_lp_ts?.append(i,g),this.acc_z_lp_ts?.append(i,v),this.acc_mag_lp_ts?.append(i,C),this.acc_x_filter_ts?.append(i,l),this.acc_y_filter_ts?.append(i,L),this.acc_z_filter_ts?.append(i,m),this.acc_mag_filter_ts?.append(i,S)},o)}}};changeECGGraph=e=>{if(this.ecg_chart!==void 0&&this.ecg_ts!==void 0&&this.ecg_filter_ts!==void 0&&this.ecg_rms_ts!==void 0){let t=e.target.selectedIndex;switch(this.ecg_chart.stop(),t){case 0:this.ecg_chart.configureTimeSeries([this.ecg_ts],[je],[y("\u2015 Voltage (\u03BCV)",10,0)],!1,void 0,void 0,1,1,fe.title?.text||"EXG raw voltage (0.7\u201340 Hz)",!1,[],!0,!1,!0);break;case 1:this.ecg_chart.configureTimeSeries([this.ecg_filter_ts],[Ke],[y("\u2015 Voltage (\u03BCV)",10,0)],!0,this.ECG_FILTER_MIN,this.ECG_FILTER_MAX,1,1,`${Ut(this.ecg_filter_info)} on EXG raw`,!1,[],!0,!0,!0);break;case 2:this.ecg_chart.configureTimeSeries([this.ecg_rms_ts],[Je],[y("\u2015 RMS voltage (\u03BCV)",10,0)],!0,this.ECG_RMS_MIN,this.ECG_RMS_MAX,1,1,`RMS using ${this.ecg_rms_window_ms}ms window on ${Ut(this.ecg_filter_info,!1)} EXG`,!1,[],!0,!0,!0);break}this.ecg_chart.start()}};changeACCGraph=e=>{if(this.acc_chart!==void 0&&this.acc_x_ts!==void 0&&this.acc_y_ts!==void 0&&this.acc_z_ts!==void 0&&this.acc_x_lp_ts!==void 0&&this.acc_y_lp_ts!==void 0&&this.acc_z_lp_ts!==void 0&&this.acc_mag_lp_ts!==void 0&&this.acc_rho_ts!==void 0&&this.acc_phi_ts!==void 0&&this.acc_theta_ts!==void 0&&this.acc_mag_ts!==void 0&&this.acc_x_filter_ts!==void 0&&this.acc_y_filter_ts!==void 0&&this.acc_z_filter_ts!==void 0&&this.acc_mag_filter_ts!==void 0){let t=e.target.selectedIndex,c="";switch(this.acc_chart.stop(),t){case 0:this.acc_chart.configureTimeSeries([this.acc_x_ts,this.acc_y_ts,this.acc_z_ts,this.acc_mag_ts],[ti,ei,ii,ci],[y("\u2015 X-axis (mG)",10,0),y("\u2015 Y-axis (mG)",10,0),y("\u2015 Z-axis (mG)",10,0),y("\u2015 ACC magnitude (mG)",10,0)],!0,this.ACC_MIN,this.ACC_MAX,1,1,pe.title?.text||"Accelerometer raw",!1,[],!0,!0,!0);break;case 1:this.acc_chart.configureTimeSeries([this.acc_x_lp_ts,this.acc_y_lp_ts,this.acc_z_lp_ts,this.acc_mag_lp_ts],[ni,si,ri,hi],[y("\u2015 X-axis (mG)",10,0),y("\u2015 Y-axis (mG)",10,0),y("\u2015 Z-axis (mG)",10,0),y("\u2015 ACC magnitude (mG)",10,0)],!0,this.ACC_MIN,this.ACC_MAX,1,1,`${Ut(this.acc_lp_info)} on accelerometer raw`,!1,[],!0,!0,!0);break;case 2:this.acc_chart.configureTimeSeries([this.acc_rho_ts,this.acc_phi_ts,this.acc_theta_ts],[ai,oi,li],[y("\u2015 \u03C1\xB0 \u2220(X-axis, Horizon)",10,0),y("\u2015 \u03D5\xB0 \u2220(Y-axis, Horizon)",10,0),y("\u2015 \u03B8\xB0 \u2220(Z-axis, -Gravity)",10,0)],!1,-120,120,1.3,1.3,"Tilt angle [-90\xB0, 90\xB0] from lowpass on accelerometer raw",!1,[{value:90,color:"#ffffff7f",lineWidth:1},{value:-90,color:"#ffffff7f",lineWidth:1}],!0,!0,!0);break;case 3:this.acc_chart.configureTimeSeries([this.acc_x_filter_ts,this.acc_y_filter_ts,this.acc_z_filter_ts,this.acc_mag_filter_ts],[di,ui,fi,pi],[y("\u2015 X-axis (mG)",10,0),y("\u2015 Y-axis (mG)",10,0),y("\u2015 Z-axis (mG)",10,0),y("\u2015 ACC magnitude (mG)",10,0)],!0,this.ACC_FILTER_MIN,this.ACC_FILTER_MAX,1,1,`${Ut(this.acc_filter_info)} on accelerometer`,!1,[],!0,!0,!0);break}this.acc_chart.start()}};onWheelECG=e=>{if(this.ecg_chart!==void 0&&!this.ecg_chart.yScaleIsAuto()){let t=e.deltaY<0?ae:-ae;switch(this.ECGFormSelect?.selectedIndex){case 0:break;case 1:this.ECG_FILTER_MAX!==void 0&&this.ECG_FILTER_MIN!==void 0&&(e.preventDefault(),this.ECG_FILTER_MAX+=t,this.ECG_FILTER_MIN-=t,(this.ECG_FILTER_MAX<Ne||this.ECG_FILTER_MAX<=this.ECG_FILTER_MIN||this.ECG_FILTER_MAX/gt>se)&&(this.ECG_FILTER_MAX-=t,this.ECG_FILTER_MIN+=t),this.ecg_chart.options.minValue=this.ECG_FILTER_MIN,this.ecg_chart.options.maxValue=this.ECG_FILTER_MAX);break;case 2:if(this.ECG_RMS_MAX!==void 0){e.preventDefault(),this.ECG_RMS_MAX+=t,(this.ECG_RMS_MAX<Oe||this.ECG_RMS_MAX<=this.ECG_RMS_MIN||this.ECG_RMS_MAX/gt>re)&&(this.ECG_RMS_MAX-=t),this.ecg_chart.options.minValue=0,this.ecg_chart.options.maxValue=this.ECG_RMS_MAX;break}}}};onWheelACC=e=>{if(this.acc_chart!==void 0&&!this.acc_chart.yScaleIsAuto()){let t=0;switch(this.ACCFormSelect?.selectedIndex){case 0:case 1:this.ACC_MAX!==void 0&&this.ACC_MIN!==void 0&&(e.preventDefault(),t=e.deltaY<0?he:-he,this.ACC_MAX+=t,this.ACC_MIN-=t,(this.ACC_MAX<ze||this.ACC_MAX<=this.ACC_MIN||this.ACC_MAX/gt>zt)&&(this.ACC_MAX-=t,this.ACC_MIN+=t),this.acc_chart.options.minValue=this.ACC_MIN,this.acc_chart.options.maxValue=this.ACC_MAX);break;case 2:break;case 3:this.ACC_FILTER_MAX!==void 0&&this.ACC_FILTER_MIN!==void 0&&(e.preventDefault(),t=e.deltaY<0?ue:-ue,this.ACC_FILTER_MAX+=t,this.ACC_FILTER_MIN-=t,(this.ACC_FILTER_MAX<Ye||this.ACC_FILTER_MAX<=this.ACC_MIN||this.ACC_FILTER_MAX/gt>de)&&(this.ACC_FILTER_MAX-=t,this.ACC_FILTER_MIN+=t),this.acc_chart.options.minValue=this.ACC_FILTER_MIN,this.acc_chart.options.maxValue=this.ACC_FILTER_MAX);break}}};disableAllOtherSameSwitch(){for(let e=0;e<a.polarVisRows.length;e++){let t=a.polarVisRows[e];t!==this&&t.polarH10===this.polarH10&&(t.ECGSwitchInput.disabled=!0,t.ACCSwitchInput.disabled=!0)}}enableAllOtherSameSwitch(){for(let e=0;e<a.polarVisRows.length;e++){let t=a.polarVisRows[e];t!==this&&t.polarH10===this.polarH10&&(t.ECGSwitchInput.disabled=!1,t.ACCSwitchInput.disabled=!1)}}onToggleECG=async e=>{if(this.ACCSwitchInput.disabled=!0,this.disableAllOtherSameSwitch(),e.target?.checked){this.initECGFilterSettings();let t;this.ACCDiv===void 0?t="full-width":(t="half-width",this.ACCDiv.classList.remove("full-width"),this.ACCDiv.classList.add("half-width"),this.visContainerDiv.removeChild(this.ACCDiv)),this.ECGDiv=b("ECGDiv",this.visContainerDiv,["float-left","almost-full-height",t]),this.ECGDiv.addEventListener("wheel",this.onWheelECG),this.ACCDiv!==void 0&&this.visContainerDiv.appendChild(this.ACCDiv),this.ecg_canvas=gi("ecg_canvas",this.ECGDiv),this.ecg_chart=new mt(fe),this.ecg_chart.options.millisPerPixel=this.ecg_millis_per_px,this.ecg_ts=new P.TimeSeries,this.ecg_rms_ts=new P.TimeSeries,this.ecg_filter_ts=new P.TimeSeries,this.ecg_chart.streamTo(this.ecg_canvas,this.ecg_stream_delay),this.updateECGRMSWinSize(),this.updateECGRMSWin(),this.ecg_resize=Ci(this.ecg_chart,1,1),this.ecg_resize_observer=new ResizeObserver(c=>{for(let r of c)r.target===this.ECGDiv&&this.ecg_resize!==void 0&&this.ecg_resize()}),this.ecg_resize_observer.observe(this.ECGDiv),this.ecgFilterCoefReset(),this.ecg_resize(),this.ECGFormSelect!==void 0&&(this.ECGFormSelect.disabled=!1,this.ECGFormSelect.selectedIndex=0),await this.startECG(ct),this.changeECGGraph({target:{selectedIndex:0}})}else this.ECGDiv!==void 0&&this.ecg_canvas!==void 0&&this.ecg_chart!==void 0&&(this.ecg_chart.stop(),this.ECGFormSelect!==void 0&&(this.ECGFormSelect.disabled=!0,this.ECGFormSelect.selectedIndex=0),this.ECGDiv.contains(this.ecg_canvas)&&(this.ACCDiv?.classList.remove("half-width"),this.ACCDiv?.classList.add("full-width"),await this.stopECG(),this.visContainerDiv.removeChild(this.ECGDiv),this.ecg_resize_observer?.disconnect(),this.polarH10.removeEventListener("ECG",this.newECGCallback),this.resetECG()));this.ACCSwitchInput&&(this.ACCSwitchInput.disabled=!1),this.enableAllOtherSameSwitch()};onToggleACC=async e=>{if(this.disableAllOtherSameSwitch(),this.ECGSwitchInput&&(this.ECGSwitchInput.disabled=!0),e.target?.checked){this.initACCLowpassFilterSettings(),this.initACCFilterSettings();let t;this.ECGDiv===void 0?t="full-width":(t="half-width",this.ECGDiv.classList.remove("full-width"),this.ECGDiv.classList.add("half-width")),this.ACCDiv=b("ACCDiv",this.visContainerDiv,["float-left","almost-full-height",t]),this.ACCDiv.addEventListener("wheel",this.onWheelACC),this.acc_canvas=gi("acc_canvas",this.ACCDiv),this.acc_chart=new mt(pe),this.acc_chart.options.millisPerPixel=this.acc_millis_per_px,this.acc_x_ts=new P.TimeSeries,this.acc_y_ts=new P.TimeSeries,this.acc_z_ts=new P.TimeSeries,this.acc_mag_ts=new P.TimeSeries,this.acc_x_lp_ts=new P.TimeSeries,this.acc_y_lp_ts=new P.TimeSeries,this.acc_z_lp_ts=new P.TimeSeries,this.acc_mag_lp_ts=new P.TimeSeries,this.acc_rho_ts=new P.TimeSeries,this.acc_phi_ts=new P.TimeSeries,this.acc_theta_ts=new P.TimeSeries,this.acc_x_filter_ts=new P.TimeSeries,this.acc_y_filter_ts=new P.TimeSeries,this.acc_z_filter_ts=new P.TimeSeries,this.acc_mag_filter_ts=new P.TimeSeries,this.acc_chart.streamTo(this.acc_canvas,this.acc_stream_delay),this.acc_resize=Ci(this.acc_chart,1,1),this.acc_resize_observer=new ResizeObserver(c=>{for(let r of c)r.target===this.ACCDiv&&this.acc_resize!==void 0&&this.acc_resize()}),this.acc_resize_observer.observe(this.ACCDiv),this.acc_lp_iir_coef=Wt[this.acc_lp_info.type](this.acc_lp_info),this.acc_x_lp_iir=(0,O.IirFilter)(this.acc_lp_iir_coef),this.acc_y_lp_iir=(0,O.IirFilter)(this.acc_lp_iir_coef),this.acc_z_lp_iir=(0,O.IirFilter)(this.acc_lp_iir_coef),this.acc_mag_lp_iir=(0,O.IirFilter)(this.acc_lp_iir_coef),this.acc_filter_iir_coef=Wt[this.acc_filter_info.type](this.acc_filter_info),this.acc_x_filter_iir=(0,O.IirFilter)(this.acc_filter_iir_coef),this.acc_y_filter_iir=(0,O.IirFilter)(this.acc_filter_iir_coef),this.acc_z_filter_iir=(0,O.IirFilter)(this.acc_filter_iir_coef),this.acc_mag_filter_iir=(0,O.IirFilter)(this.acc_filter_iir_coef),this.acc_resize(),this.ACCFormSelect!==void 0&&(this.ACCFormSelect.disabled=!1,this.ACCFormSelect.selectedIndex=0),await this.startACC(this.acc_range_g,this.acc_sample_rate_hz),this.changeACCGraph({target:{selectedIndex:0}}),this.show3DBtn.disabled=!1}else this.show3DBtn.disabled=!0,this.ACCDiv!==void 0&&this.acc_canvas!==void 0&&this.acc_chart!==void 0&&(this.acc_chart.stop(),this.ACCFormSelect!==void 0&&(this.ACCFormSelect.disabled=!0,this.ACCFormSelect.selectedIndex=0),this.ACCDiv.contains(this.acc_canvas)&&this.ACCDiv.removeChild(this.acc_canvas),this.ECGDiv?.classList.remove("half-width"),this.ECGDiv?.classList.add("full-width"),this.polarH10.removeEventListener("ACC",this.newACCCallback),this.visContainerDiv.removeChild(this.ACCDiv),this.acc_resize_observer?.disconnect(),await this.stopAcc(),this.resetACC());this.ECGSwitchInput&&(this.ECGSwitchInput.disabled=!1),this.enableAllOtherSameSwitch()};removeSelf(){this.parent.contains(this.polarSensorDiv)&&this.parent.removeChild(this.polarSensorDiv);let e=a.polarVisRows.indexOf(this);e>-1&&(a.polarVisRows.splice(e,1),a.polarVisRows.length>0&&(e===a.polarVisRows.length?a.polarVisRows[e-1].orderDownBtn.disabled=!0:e===0&&(a.polarVisRows[0].orderUpBtn.disabled=!0),a.reOrderRows()))}static reOrderRows(){for(let e=0;e<a.polarVisRows.length;e++){let t=a.polarVisRows[e];t.order=e,t.polarSensorDiv.style.order=e.toString()}}async initPolarH10(){this.polarSensorDiv=b("polarSensorDiv",this.parent,["polar-sensor-row","flexbox"]),this.optionDiv=b("optionDiv",this.polarSensorDiv,["polar-sensor-left-panel","center"]),this.order=a.polarVisRows.length,this.polarSensorDiv.style.order=this.order.toString(),this.nameDiv=b("device-name-batt",this.optionDiv,["center","flexbox"],`Conneting ${this.deviceName}...`),this.loadingDiv=b("ConnectLoading",this.optionDiv,["loading","loading-lg","full-width","flexbox"]),await this.initPolarH10IfUnique()}includesDuplicate(e="device",t=void 0){let c=-1;if(t!==void 0)for(let r=0;r<a.polarVisRows.length;r++){let n=a.polarVisRows[r];if(n!==this&&n[e]===this[e]&&t(n)){c=r;break}}else for(let r=0;r<a.polarVisRows.length;r++){let n=a.polarVisRows[r];if(n!==this&&n[e]===this[e]){c=r;break}}return c}static includesDuplicate(e,t="device",c=void 0){let r=-1;if(c!==void 0)for(let n=0;n<a.polarVisRows.length;n++){let d=a.polarVisRows[n];if(d!==e&&d[t]===e[t]&&c(d)){r=n;break}}else for(let n=0;n<a.polarVisRows.length;n++){let d=a.polarVisRows[n];if(d!==e&&d[t]===e[t]){r=n;break}}return r}disconnectPolarH10IfAlone(){this.includesDuplicate("device")===-1&&this.device.gatt?.disconnect()}async initPolarH10IfUnique(){let e=this.includesDuplicate("device");if(e<0)try{this.polarH10=new Fe(this.device),await this.polarH10.init();let t=await this.polarH10.getSensorSettingsFromId(Y.ACC)}catch(t){throw console.log(t),new Error("polarH10 device initialization failed!")}else this.polarH10=a.polarVisRows[e].polarH10}resetECG(){this.ecg_canvas=void 0,this.ECGDiv=void 0,this.ecg_resize=void 0,this.ecg_mss_win=void 0,this.ecg_chart=void 0,this.ecg_ts=void 0,this.ecg_filter_ts=void 0,this.ecg_rms_ts=void 0,this.ecg_resize_observer=void 0,this.ecg_filter_iir_coef=void 0,this.ecg_filter_iir=void 0,this.ecg_mss_win_i=0,this.ecg_mss=0}resetACC(){this.ACCDiv=void 0,this.acc_resize=void 0,this.acc_canvas=void 0,this.acc_chart=void 0,this.acc_x_ts=void 0,this.acc_y_ts=void 0,this.acc_z_ts=void 0,this.acc_resize_observer=void 0,this.acc_lp_iir_coef=void 0,this.acc_filter_iir_coef=void 0,this.acc_x_lp_iir=void 0,this.acc_y_lp_iir=void 0,this.acc_z_lp_iir=void 0,this.acc_mag_lp_iir=void 0,this.acc_x_lp_ts=void 0,this.acc_y_lp_ts=void 0,this.acc_z_lp_ts=void 0,this.acc_rho_ts=void 0,this.acc_phi_ts=void 0,this.acc_theta_ts=void 0,this.acc_mag_ts=void 0}onBodypartSelect=e=>{let t=e.target.selectedIndex;for(let c=0;c<a.polarVisRows.length;c++){let r=a.polarVisRows[c];r!==this&&r.polarH10===this.polarH10&&(r.bodypartSelect.selectedIndex=t)}};onCustomBodyPart=e=>{let t=e.target.value;for(let c=0;c<a.polarVisRows.length;c++){let r=a.polarVisRows[c];r.customBodyPart=t,r.polarH10===this.polarH10&&r.customBodyPartSpan!==void 0&&(r.customBodyPartSpan.textContent=t,r.customBodyPartInput.value=t)}if(t.length===0)for(let c=0;c<a.polarVisRows.length;c++){let r=a.polarVisRows[c];r.polarH10===this.polarH10&&(r.customBodyPartSpan?.classList.add("hide"),r.bodypartSelect?.classList.remove("hide"))}else for(let c=0;c<a.polarVisRows.length;c++){let r=a.polarVisRows[c];r.polarH10===this.polarH10&&(r.customBodyPartSpan?.classList.remove("hide"),r.bodypartSelect?.classList.add("hide"))}};async initDeviceInfo(){this.deviceInfoDiv=b("deviceInfoDiv",this.optionDiv,["device-info"]),this.disconnectDiv=b("disconnectDiv",void 0,["flexbox","disconnect"]),this.disBtn=Mt("delete","distBtn",this.disconnectDiv,!1,this.disconnectPolarH10,["btn","btn-primary","btn-sm","s-circle"]),dt(this.disBtn,"disconnect","top"),this.battLvl=await this.polarH10.getBatteryLevel(),this.optionDiv.removeChild(this.loadingDiv),this.optionDiv.removeChild(this.nameDiv),this.optionDiv.classList.remove("center"),this.nameDiv.textContent="",this.nameDiv.classList.add("flex"),this.deviceNameDiv=b("devicename",this.nameDiv,["flexbox"],this.deviceName);let e;this.battLvl>Re?e=`\u{1F50B}${this.battLvl}%`:e=`\u{1FAAB}${this.battLvl}%`,this.battLvlDiv=b("battLvl",this.nameDiv,["flexbox","small-mid-text"],e),this.nameDiv.classList.add("flexbox"),this.deviceInfoDiv.appendChild(this.disconnectDiv),this.deviceInfoDiv.appendChild(this.nameDiv),this.optionDiv.appendChild(this.deviceInfoDiv),this.dataInfo=b("dataInfo",this.deviceInfoDiv,["data-info"]),this.extraDataCtrl=b("extraDataCtrl",this.optionDiv,["extra-data-ctrl","center"]),this.filterConfigBtn=Mt("settings","filterConfigBtn",this.extraDataCtrl,!0,this.toggleVisConfig,["btn","btn-sm"]),this.showVisConfig&&this.filterConfigBtn.classList.add("btn-primary"),dt(this.filterConfigBtn,"settings, work-in-progress","left"),this.show3DBtn=Mt("view_in_ar","show3DBtn",this.extraDataCtrl,!0,void 0,["btn","btn-sm"]),this.show3DBtn.disabled=!0,dt(this.show3DBtn,"3D Tilt, work-in-progress","left"),this.rowOrder=b("rowOrder",this.optionDiv,["row-order"]),this.orderUpBtn=Mt("arrow-up","orderUpBtn",this.rowOrder,!1,this.moveUp,["btn","btn-primary","btn-sm"]),dt(this.orderUpBtn,"Move up","right"),this.orderUpBtn.disabled=a.polarVisRows.length<1,dt(this.orderUpBtn,"Move up","right"),this.orderDownBtn=Mt("arrow-down","orderDownBtn",this.rowOrder,!1,this.moveDown,["btn","btn-primary","btn-sm"]),dt(this.orderDownBtn,"Move down","right"),this.orderDownBtn.disabled=!0,a.polarVisRows.length>0&&(a.polarVisRows[a.polarVisRows.length-1].orderDownBtn.disabled=!1),this.bodypartLabel=b("bodypartLabel",this.dataInfo,["bodypart-text"],"Bodypart:"),this.bodypartSelectDiv=b("bodypartSelectDiv",this.dataInfo,["bodypart-select"]),this.bodypartSelect=Q("bodypartSelect",this.bodypartSelectDiv,["form-select","dark-input","select-sm","almost-full-width"],"",Le,void 0,W),this.bodypartSelect.addEventListener("change",this.onBodypartSelect),this.customBodyPartSpan=D("customBodyPartSpan",this.bodypartSelectDiv,["hide","hide-overflow"],this.customBodyPart),this.dataCtrl=b("dataCtrl",this.optionDiv,["data-ctrl"]),this.visContainerDiv=b("visContainer",this.polarSensorDiv,["visContainer"]),this.visConfigDiv=b("visConfigDiv",this.polarSensorDiv,["visContainer"]),this.showVisConfig?this.visContainerDiv.classList.add("hide"):this.visConfigDiv.classList.add("hide"),this.initVisConfigDiv()}onECGStreamDelayChange=e=>{e.target.valueAsNumber<vt?(e.target.valueAsNumber=vt,e.target.value=vt.toString()):e.target.valueAsNumber>Et&&(e.target.valueAsNumber=Et,e.target.value=Et.toString()),this.ecg_stream_delay=e.target.valueAsNumber,this.ECGStreamDelayInput!==void 0&&(this.ECGStreamDelayInput.value=e.target.value),this.ecg_chart!==void 0&&"delay"in this.ecg_chart&&(this.ecg_chart.stop(),this.ecg_chart.delay=this.ecg_stream_delay,this.ecg_chart.start())};onECGRMSWinInput=e=>{let t=parseFloat(e.target.value);t<Bt&&(t=Bt),t>Vt&&(t=Vt),this.ecg_rms_window_ms=t,this.updateECGRMSWinSize(),this.updateECGRMSWin(),this.ecgFilterSelectGraphRestart()};onACCStreamDelayChange=e=>{e.target.valueAsNumber<bt?(e.target.valueAsNumber=bt,e.target.value=bt.toString()):e.target.valueAsNumber>Tt&&(e.target.valueAsNumber=Tt,e.target.value=Tt.toString()),this.acc_stream_delay=e.target.valueAsNumber,this.ACCStreamDelayInput!==void 0&&(this.ACCStreamDelayInput.value=e.target.value),this.acc_chart!==void 0&&"delay"in this.acc_chart&&(this.acc_chart.stop(),this.acc_chart.delay=this.acc_stream_delay,this.acc_chart.start())};onECGMPPChange=e=>{e.target.valueAsNumber<At?(e.target.valueAsNumber=At,e.target.value=At.toString()):e.target.valueAsNumber>It&&(e.target.valueAsNumber=It,e.target.value=It.toString()),this.ecg_millis_per_px=e.target.valueAsNumber,this.ECGstreamMPPInput!==void 0&&(this.ECGstreamMPPInput.value=e.target.value),this.ecg_chart!==void 0&&(this.ecg_chart.stop(),this.ecg_chart.options.millisPerPixel=this.ecg_millis_per_px,this.ecg_chart.start())};onACCMPPChange=e=>{e.target.valueAsNumber<wt?(e.target.valueAsNumber=wt,e.target.value=wt.toString()):e.target.valueAsNumber>Ft&&(e.target.valueAsNumber=Ft,e.target.value=Ft.toString()),this.acc_millis_per_px=e.target.valueAsNumber,this.ACCstreamMPPInput!==void 0&&(this.ACCstreamMPPInput.value=e.target.value),this.acc_chart!==void 0&&(this.acc_chart.stop(),this.acc_chart.options.millisPerPixel=this.acc_millis_per_px,this.acc_chart.start())};onACCRangeSelect=async e=>{let t=e.target.selectedIndex,c=Xt[t];for(let r=0;r<a.polarVisRows.length;r++){let n=a.polarVisRows[r];n.polarH10===this.polarH10&&(n.ACCRangeSelect!==void 0&&(n.ACCRangeSelect.selectedIndex=t),n.acc_range_g=c,n.initACCLowpassFilterSettings(),n.initACCFilterSettings())}await this.restartAllACC()};onACCSampleRateSelect=async e=>{let t=e.target.selectedIndex,c=ht[t];for(let r=0;r<a.polarVisRows.length;r++){let n=a.polarVisRows[r];n.polarH10===this.polarH10&&(n.ACCSampleRateSelect!==void 0&&(n.ACCSampleRateSelect.selectedIndex=t),n.acc_sample_rate_hz=c,n.initACCLowpassFilterSettings(),n.initACCFilterSettings())}await this.restartAllACC()};onECGFilterType=e=>{let t=e.target.selectedIndex;t===2?(this.ecg_filter_info.Fl=et,this.ecg_filter_info.Fh=it,this.ecg_filter_info.BW=it-et,this.ecg_filter_info.Fc=Math.sqrt(et*it),this.ECGFilterLowCutInput!==void 0&&(this.ECGFilterLowCutInput.value=et.toString()),this.ECGFilterHighCutInput!==void 0&&(this.ECGFilterHighCutInput.value=it.toString())):(this.ecg_filter_info.Fc=Ht,this.ECGFilterCutoffInput!==void 0&&(this.ECGFilterCutoffInput.value=Ht.toString())),this.ECGFilterCutoffInput!==void 0&&(t===2?this.ECGFilterCutoffInput.classList.add("hide"):this.ECGFilterCutoffInput.classList.remove("hide")),this.ECGFilterLowCutInput!==void 0&&(t===2?this.ECGFilterLowCutInput.classList.remove("hide"):this.ECGFilterLowCutInput.classList.add("hide")),this.ECGFilterHighCutInput!==void 0&&(t===2?this.ECGFilterHighCutInput.classList.remove("hide"):this.ECGFilterHighCutInput.classList.add("hide"));let c=rt[t];this.ecg_filter_info.type=c,this.ecgFilterSelectGraphRestart()};onACCFilterType=e=>{let t=e.target.selectedIndex;t===2?(this.acc_filter_info.Fl=tt,this.acc_filter_info.Fh=Z,this.acc_filter_info.BW=Z-tt,this.acc_filter_info.Fc=Math.sqrt(tt*Z),this.ACCFilterLowCutInput!==void 0&&(this.ACCFilterLowCutInput.value=tt.toString()),this.ACCFilterHighCutInput!==void 0&&(this.ACCFilterHighCutInput.value=Z.toString())):(this.acc_filter_info.Fc=Z,this.ACCFilterCutoffInput!==void 0&&(this.ACCFilterCutoffInput.value=Z.toString())),this.ACCFilterCutoffInput!==void 0&&(t===2?this.ACCFilterCutoffInput.classList.add("hide"):this.ACCFilterCutoffInput.classList.remove("hide")),this.ACCFilterLowCutInput!==void 0&&(t===2?this.ACCFilterLowCutInput.classList.remove("hide"):this.ACCFilterLowCutInput.classList.add("hide")),this.ACCFilterHighCutInput!==void 0&&(t===2?this.ACCFilterHighCutInput.classList.remove("hide"):this.ACCFilterHighCutInput.classList.add("hide"));let c=rt[t];this.acc_filter_info.type=c,this.accFilterSelectGraphRestart(3)};onECGFilterOrder=e=>{let t=parseInt(e.target.value);t<1&&(t=1),t>12&&(t=12),this.ecg_filter_info.order=t,this.ecgFilterSelectGraphRestart()};onACCFilterOrder=e=>{let t=parseInt(e.target.value);t<1&&(t=1),t>12&&(t=12),this.acc_filter_info.order=t,this.accFilterSelectGraphRestart(3)};onACCLPOrder=e=>{let t=parseInt(e.target.value);t<1&&(t=1),t>12&&(t=12),this.acc_lp_info.order=t,this.accFilterSelectGraphRestart(1)};onECGFilterChar=e=>{let t=e.target.selectedIndex,c=$[t];this.ecg_filter_info.characteristic=c,this.ecgFilterSelectGraphRestart()};onACCFilterChar=e=>{let t=e.target.selectedIndex,c=$[t];this.acc_filter_info.characteristic=c,this.accFilterSelectGraphRestart(3)};onACCLPChar=e=>{let t=e.target.selectedIndex,c=$[t];this.acc_lp_info.characteristic=c,this.accFilterSelectGraphRestart(1)};onECGFilterCutoff=e=>{let t=parseFloat(e.target.value);t<z&&(t=z),t>nt&&(t=nt),this.ECGFilterCutoffInput!==void 0&&(this.ECGFilterCutoffInput.value=t.toString()),this.ecg_filter_info.Fc=t,this.ecgFilterSelectGraphRestart()};onACCFilterCutoff=e=>{let t=parseFloat(e.target.value);t<V&&(t=V),t>J&&(t=J),this.ACCFilterCutoffInput!==void 0&&(this.ACCFilterCutoffInput.value=t.toString()),this.acc_filter_info.Fc=t,this.accFilterSelectGraphRestart(3)};onACCLPCutoff=e=>{let t=parseFloat(e.target.value);t<V&&(t=V),t>J&&(t=J),this.ACCLPCutoffInput!==void 0&&(this.ACCLPCutoffInput.value=t.toString()),this.acc_lp_info.Fc=t,this.accFilterSelectGraphRestart(1)};onECGFilterLowCutoff=e=>{let t=parseFloat(e.target.value);this.ecg_filter_info.Fh!==void 0&&t>=this.ecg_filter_info.Fh&&(t=this.ecg_filter_info.Fh-q),t>nt&&(t=z),t<z&&(t=z),this.ecg_filter_info.Fl=t,this.updateBandpass(this.ecg_filter_info),this.ECGFilterHighCutInput!==void 0&&(this.ECGFilterHighCutInput.min=(t+q).toString(),this.ECGFilterLowCutInput!==void 0&&(this.ECGFilterLowCutInput.value=t.toString())),this.ecgFilterSelectGraphRestart()};onACCFilterLowCutoff=e=>{let t=parseFloat(e.target.value);this.acc_filter_info.Fh!==void 0&&t>=this.acc_filter_info.Fh&&(t=this.acc_filter_info.Fh-st),t>J&&(t=V),t<V&&(t=V),this.acc_filter_info.Fl=t,this.updateBandpass(this.acc_filter_info),this.ACCFilterHighCutInput!==void 0&&(this.ACCFilterHighCutInput.min=(t+st).toString(),this.ACCFilterLowCutInput!==void 0&&(this.ACCFilterLowCutInput.value=t.toString())),this.accFilterSelectGraphRestart(3)};onECGFilterHighCutoff=e=>{let t=parseFloat(e.target.value);this.ecg_filter_info.Fl!==void 0&&t<=this.ecg_filter_info.Fl&&(t=this.ecg_filter_info.Fl+q),t>nt&&(t=z),t<z&&(t=z),this.ecg_filter_info.Fh=t,this.updateBandpass(this.ecg_filter_info),this.ECGFilterLowCutInput!==void 0&&(this.ECGFilterLowCutInput.max=(t-q).toString(),this.ECGFilterHighCutInput!==void 0&&(this.ECGFilterHighCutInput.value=t.toString())),this.ecgFilterSelectGraphRestart()};onACCFilterHighCutoff=e=>{let t=parseFloat(e.target.value);this.acc_filter_info.Fl!==void 0&&t<=this.acc_filter_info.Fl&&(t=this.acc_filter_info.Fl+st),t>J&&(t=V),t<V&&(t=V),this.acc_filter_info.Fh=t,this.updateBandpass(this.acc_filter_info),this.ACCFilterLowCutInput!==void 0&&(this.ACCFilterLowCutInput.max=(t-st).toString(),this.ACCFilterHighCutInput!==void 0&&(this.ACCFilterHighCutInput.value=t.toString())),this.accFilterSelectGraphRestart(3)};ecgFilterSelectGraphRestart(){this.ecgFilterCoefReset();let e=this.ECGFormSelect.selectedIndex,t=this.ECGFormSelect.disabled;this.generateECGFormSelect(),this.ECGFormSelect.disabled=t,this.ECGFormSelect.selectedIndex=e,e===1&&this.changeECGGraph({target:{selectedIndex:e}})}accFilterSelectGraphRestart(e=3){this.accFilterCoefReset();let t=this.ACCFormSelect.selectedIndex,c=this.ACCFormSelect.disabled;this.generateACCFormSelect(),this.ACCFormSelect.disabled=c,this.ACCFormSelect.selectedIndex=t,t===e&&this.changeACCGraph({target:{selectedIndex:t}})}ecgFilterCoefReset(){this.ecg_filter_iir_coef=Wt[this.ecg_filter_info.type](this.ecg_filter_info),this.ecg_filter_iir=(0,O.IirFilter)(this.ecg_filter_iir_coef)}accFilterCoefReset(){this.acc_filter_iir_coef=Wt[this.acc_filter_info.type](this.acc_filter_info),this.acc_x_filter_iir=(0,O.IirFilter)(this.acc_filter_iir_coef),this.acc_y_filter_iir=(0,O.IirFilter)(this.acc_filter_iir_coef),this.acc_z_filter_iir=(0,O.IirFilter)(this.acc_filter_iir_coef),this.acc_mag_filter_iir=(0,O.IirFilter)(this.acc_filter_iir_coef)}async restartAllACC(){let e=[];for(let t=0;t<a.polarVisRows.length;t++){let c=a.polarVisRows[t];c.polarH10===this.polarH10&&c.ACCIsOn()&&(await c.onToggleACC({target:{checked:!1}}),e.push(c))}for(let t=0;t<e.length;t++)await e[t].onToggleACC({target:{checked:!0}})}initVisConfigDiv(){this.ECGConfigDiv=b("ECGConfigDiv",this.visConfigDiv,["float-left","almost-full-height","config-div","half-width","flexbox","flex-col"]);let e=b("ECGChartConfigTitleRow",this.ECGConfigDiv,["full-width","flexbox"]);b("ECGChartConfigTitle",e,["fourty-width","center","bold-text"],"EXG Visualization Configs");let t=b("customBodypartInputDiv",e,["sixty-width","flexbox"]),c=D("customBodypartSpan",t,["padright-5px","padleft-5px"],"Custom Bodypart:");this.customBodyPartInput=ji("customBodyPartInput",t,["dark-input","custom-bodypart-input-width"]),this.customBodyPartInput.addEventListener("input",this.onCustomBodyPart),this.ECGChartConfigDiv=b("ECGChartConfigDiv",this.ECGConfigDiv,["full-width","flexbox"]);let r=b("ECGChartStreamDelay",this.ECGChartConfigDiv,["full-width","flexbox"]);D("ECGStreamDelayLabel",r,["padleft-5px","padright-5px"],"Delay (ms):"),this.ECGStreamDelayInput=B("ECGStreamDelayInput",r,["marginright-5px","dark-input","input-width-4_5"],vt,Et,qe,this.ecg_stream_delay),this.ECGStreamDelayInput.addEventListener("change",this.onECGStreamDelayChange),D("ECGStreamDataWidthLabel",r,["padright-5px"],"Data width (ms/px):"),this.ECGstreamMPPInput=B("ECGStreamMPPInput",r,["marginright-5px","dark-input","input-width-3_5"],At,It,Ze,this.ecg_millis_per_px),this.ECGstreamMPPInput.addEventListener("change",this.onECGMPPChange),D("ECGSRMSLabel",r,["padright-5px"],"RMS window (ms): "),this.ECGRMSWinInput=B("ECGRMSWinInput",r,["marginright-5px","dark-input","input-width-4_5"],Bt,Vt,He,this.ecg_rms_window_ms),this.ECGRMSWinInput.addEventListener("change",this.onECGRMSWinInput),this.ECGFilterConfigDiv=b("ECGFilterConfigDiv",this.ECGConfigDiv,["full-width","flexbox"]),D("ECGFilterTypeSpan",this.ECGFilterConfigDiv,["padleft-5px","padright-5px"],"Filter Type:"),this.ECGFilterTypesSelect=Q("ECGFilterTypesSelect",this.ECGFilterConfigDiv,["form-select","dark-input","select-sm","filter-type-width"],"",rt,rt.indexOf(this.ecg_filter_info.type)),this.ECGFilterTypesSelect.addEventListener("change",this.onECGFilterType),D("ECGFilterCharSpan",this.ECGFilterConfigDiv,["padleft-5px","padright-5px"],"Char:"),this.ECGFilteCharSelect=Q("ECGFilteCharSelect",this.ECGFilterConfigDiv,["form-select","dark-input","select-sm","filter-char-width"],"",$,$.indexOf(this.ecg_filter_info.characteristic)),this.ECGFilteCharSelect.addEventListener("change",this.onECGFilterChar),D("ECGFilterOrderSpan",this.ECGFilterConfigDiv,["padleft-5px","padright-5px"],"Order:"),this.ECGFilterOrderInput=B("ECGFilterOrderInput",this.ECGFilterConfigDiv,["dark-input","input-width-3_5"],1,12,1,this.ecg_filter_info.order),this.ECGFilterOrderInput.addEventListener("change",this.onECGFilterOrder),D("ECGFilterCutoffSpan",this.ECGFilterConfigDiv,["padleft-5px","padright-5px"],"Cutoff (Hz):"),this.ECGFilterCutoffInput=B("ECGFilterCutoffInput",this.ECGFilterConfigDiv,["dark-input","freq-input-width"],z,nt,q,this.ecg_filter_info.Fc),this.ECGFilterCutoffInput.addEventListener("change",this.onECGFilterCutoff),this.ECGFilterLowCutInput=B("ECGFilterLowCutInput",this.ECGFilterConfigDiv,["margin-left-5","dark-input","freq-input-width","hide"],z,this.ecg_filter_info.Fh,q,this.ecg_filter_info.Fl),this.ECGFilterLowCutInput.addEventListener("change",this.onECGFilterLowCutoff),this.ECGFilterHighCutInput=B("ECGFilterHighCutInput",this.ECGFilterConfigDiv,["margin-left-5","dark-input","freq-input-width","hide"],this.ecg_filter_info.Fl,nt,q,this.ecg_filter_info.Fh),this.ECGFilterHighCutInput.addEventListener("change",this.onECGFilterHighCutoff),this.ECGFilterTypesSelect.selectedIndex===2&&(this.ECGFilterCutoffInput.classList.add("hide"),this.ECGFilterLowCutInput.classList.remove("hide"),this.ECGFilterHighCutInput.classList.remove("hide")),this.ECGRMSConfigDiv=b("ECGRMSConfigDiv",this.ECGConfigDiv,["full-width"]),this.ACCConfigDiv=b("ACCConfigDiv",this.visConfigDiv,["float-left","almost-full-height","config-div","half-width","flexbox","flex-col"]);let n=b("ECGChartConfigTitleRow",this.ACCConfigDiv,["full-width","flexbox"]);b("ACCChartConfigTitle",n,["fourty-width","center","bold-text"],"Accelerometer Visualization Configs");let d=b("ACCSampleRateRange",n,["sixty-width"]),o=D("ACCSampleRateSpan",d,["padright-5px","padleft-5px"],"Fs (Hz):");this.ACCSampleRateSelect=Q("ACCSampleRateSelect",d,["form-select","dark-input","select-sm","input-width-4_5"],"",ht,ht.indexOf(this.acc_sample_rate_hz)),this.ACCSampleRateSelect.addEventListener("change",this.onACCSampleRateSelect);let i=D("ACCRangeSpan",d,["padright-5px","padleft-5px"],"Range (\xB1G):");this.ACCRangeSelect=Q("ACCRangeSelect",d,["form-select","dark-input","select-sm","input-width-3_5"],"",Xt,Xt.indexOf(this.acc_range_g)),this.ACCRangeSelect.addEventListener("change",this.onACCRangeSelect),this.ACCChartConfigDiv=b("ACCChartConfigDiv",this.ACCConfigDiv,["full-width","flexbox"]);let s=b("ACCDisplaySettingsDiv",this.ACCChartConfigDiv,["full-width","flexbox"]);D("ACCStreamDelayLabel",s,["padleft-5px","padright-5px"],"Delay (ms):"),this.ACCStreamDelayInput=B("ACCStreamDelayInput",s,["marginright-5px","dark-input","input-width-4_5"],bt,Tt,$e,this.acc_stream_delay),this.ACCStreamDelayInput.addEventListener("change",this.onACCStreamDelayChange),D("ACCStreamDataWidthLabel",s,["padright-5px"],"Data width (ms/px):"),this.ACCstreamMPPInput=B("ACCSteamMPPInput",s,["marginright-5px","dark-input","input-width-3_5"],wt,Ft,Qe),this.ACCstreamMPPInput.value=this.acc_millis_per_px.toString(),this.ACCstreamMPPInput.addEventListener("change",this.onACCMPPChange),this.ACCLPConfigDiv=b("ACCLPConfigDiv",this.ACCConfigDiv,["full-width","flexbox"]),D("ACCLPCharSpan",this.ACCLPConfigDiv,["padleft-5px","padright-5px"],"Lowpass filter characteristic:"),this.ACCLPCharSelect=Q("ACCLPCharSelect",this.ACCLPConfigDiv,["form-select","dark-input","select-sm","filter-char-width"],"",$,$.indexOf(this.acc_lp_info.characteristic)),this.ACCLPCharSelect.addEventListener("change",this.onACCLPChar),D("ACCLPOrderSpan",this.ACCLPConfigDiv,["padleft-5px","padright-5px"],"Order:"),this.ACCLPOrderInput=B("ACCLPOrderInput",this.ACCLPConfigDiv,["dark-input","input-width-3_5"],1,12,1,this.acc_lp_info.order),this.ACCLPOrderInput.addEventListener("change",this.onACCLPOrder),D("ACCLPCutoffSpan",this.ACCLPConfigDiv,["padleft-5px","padright-5px"],"Cutoff (Hz):"),this.ACCLPCutoffInput=B("ACCLPCutoffInput",this.ACCLPConfigDiv,["dark-input","freq-input-width"],V,ht[this.ACCSampleRateSelect.selectedIndex]/2,q,this.acc_lp_info.Fc),this.ACCLPCutoffInput.addEventListener("change",this.onACCLPCutoff),this.ACCFilterConfigDiv=b("ACCFilterConfigDiv",this.ACCConfigDiv,["full-width","flexbox"]),D("ACCFilterTypeSpan",this.ACCFilterConfigDiv,["padleft-5px","padright-5px"],"Filter Type:"),this.ACCFilterTypesSelect=Q("ACCFilterTypesSelect",this.ACCFilterConfigDiv,["form-select","dark-input","select-sm","filter-type-width"],"",rt,rt.indexOf(this.acc_filter_info.type)),this.ACCFilterTypesSelect.addEventListener("change",this.onACCFilterType),D("ACCFilterCharSpan",this.ACCFilterConfigDiv,["padleft-5px","padright-5px"],"Char:"),this.ACCFilterCharSelect=Q("ACCFilterCharSelect",this.ACCFilterConfigDiv,["form-select","dark-input","select-sm","filter-char-width"],"",$,$.indexOf(this.acc_filter_info.characteristic)),this.ACCFilterCharSelect.addEventListener("change",this.onACCFilterChar),D("ACCFilterOrderSpan",this.ACCFilterConfigDiv,["padleft-5px","padright-5px"],"Order:"),this.ACCFilterOrderInput=B("ACCFilterOrderInput",this.ACCFilterConfigDiv,["dark-input","input-width-3_5"],1,12,1,this.acc_filter_info.order),this.ACCFilterOrderInput.addEventListener("change",this.onACCFilterOrder),D("ACCFilterCutoffSpan",this.ACCFilterConfigDiv,["padleft-5px","padright-5px"],"Cutoff (Hz):"),this.ACCFilterCutoffInput=B("ACCFilterCutoffInput",this.ACCFilterConfigDiv,["dark-input","freq-input-width","hide"],V,ht[this.ACCSampleRateSelect.selectedIndex]/2,q,this.acc_filter_info.Fc),this.ACCFilterCutoffInput.addEventListener("change",this.onACCFilterCutoff),this.ACCFilterLowCutInput=B("ACCFilterLowCutInput",this.ACCFilterConfigDiv,["margin-left-5","dark-input","freq-input-width"],V,this.acc_filter_info.Fh,st,this.acc_filter_info.Fl),this.ACCFilterLowCutInput.addEventListener("change",this.onACCFilterLowCutoff),this.ACCFilterHighCutInput=B("ACCFilterHighCutInput",this.ACCFilterConfigDiv,["margin-left-5","dark-input","freq-input-width"],this.acc_filter_info.Fl,J,st,this.acc_filter_info.Fh),this.ACCFilterHighCutInput.addEventListener("change",this.onACCFilterHighCutoff),this.ACCFilterTypesSelect.selectedIndex!==2&&(this.ACCFilterCutoffInput.classList.remove("hide"),this.ACCFilterLowCutInput.classList.add("hide"),this.ACCFilterHighCutInput.classList.add("hide"))}async initDeviceGraphCtrl(){this.ECGCtrlDiv=b("ECGCtrlDiv",this.dataCtrl,["half-width"]);let e=mi("EXG",this.onToggleECG);this.ECGCtrlDiv.appendChild(e),this.ECGSwitchInput=e.children.item(0),this.ECGDropDown=b("ECGDropDownDiv",this.ECGCtrlDiv,["form-group"]),this.generateECGFormSelect(),this.ACCCtrlDiv=b("ACCCtrlDiv",this.dataCtrl,["half-width"]);let t=mi("ACC",this.onToggleACC);this.ACCCtrlDiv.appendChild(t),this.ACCSwitchInput=t.children.item(0),this.ACCDropDown=b("ACCDropDownDiv",this.ACCCtrlDiv,["form-group"]),this.generateACCFormSelect()}generateECGFormSelect(e=0,t=!0){this.ECGFormSelect!==void 0&&this.ECGFormSelect.parentElement?.removeChild(this.ECGFormSelect),this.ECGFormSelect=Q("ECGFormSelect",this.ECGDropDown,["form-select","dark-input","select-sm","almost-full-width"],"",["Raw",Ce(this.ecg_filter_info),`${this.ecg_rms_window_ms}ms RMS`],e),this.ECGFormSelect.onchange=this.changeECGGraph,this.ECGFormSelect.disabled=t}generateACCFormSelect(e=0,t=!0){this.ACCFormSelect!==void 0&&this.ACCFormSelect.parentElement?.removeChild(this.ACCFormSelect),this.ACCFormSelect=Q("ACCFormSelect",this.ACCDropDown,["form-select","dark-input","select-sm","almost-full-width"],"",["Raw",Ce(this.acc_lp_info),"Tilt",Ce(this.acc_filter_info)],e),this.ACCFormSelect.onchange=this.changeACCGraph,this.ACCFormSelect.disabled=t}async startECG(e=ct,t=!0){if(this.includesDuplicate("device",Si)<0)try{let r=await this.polarH10.startECG(e);r?.error==="SUCCESS"||r?.error==="ALREADY IN STATE"?t&&this.polarH10.addEventListener("ECG",this.newECGCallback):(console.log(r),this.disconnectPolarH10())}catch(r){alert(r),this.disconnectPolarH10()}else this.polarH10.addEventListener("ECG",this.newECGCallback)}async stopECG(){if(this.includesDuplicate("device",Si)<0)try{let t=await this.polarH10.stopECG();t&&console.log(t)}catch(t){console.log(t),alert(t),t.name==="NetworkError"&&this.disconnectPolarH10()}}async startACC(e=le,t=oe,c=!0){if(this.includesDuplicate("device",vi)<0)try{let n=await this.polarH10.startACC(e,t);n?.error==="SUCCESS"||n?.error==="ALREADY IN STATE"?c&&this.polarH10.addEventListener("ACC",this.newACCCallback):(console.log(n),this.disconnectPolarH10())}catch(n){alert(n),this.disconnectPolarH10()}else this.polarH10.addEventListener("ACC",this.newACCCallback)}async stopAcc(){if(this.includesDuplicate("device",vi)<0)try{let t=await this.polarH10.stopACC();t&&console.log(t)}catch(t){console.log(t),alert(t),t.name==="NetworkError"&&this.disconnectPolarH10()}}ECGIsOn(){return this.ECGDiv!==void 0}ACCIsOn(){return this.ACCDiv!==void 0}};function Ci(a,e,t,c=!1){return()=>{let n=a.canvas,d=n.parentNode,o=d.offsetWidth,i=d.offsetHeight,s=o*e,h=i*t;n.width=s-5,n.height=h,c&&console.log(`Resize at ${new Date().valueOf()} parent: ${d.id} ${d.offsetWidth} ${n.width} ${d.offsetHeight} ${n.height}`)}}function mi(a,e,t=W){let c=document.createElement("label");c.setAttribute("class","form-switch"),c.classList.add("label-sm");let r=document.createElement("input");r.id=`${a}-onoff-${t()}`,r.type="checkbox",r.addEventListener("change",e),r.classList.add("input-sm");let n=document.createElement("i");return n.classList.add("form-icon"),c.textContent=a,c.appendChild(r),c.appendChild(n),c}function Q(a,e=void 0,t=[],c="",r=[],n=void 0,d=W){let o=document.createElement("select");return ut(o,a,e,t,c,d),Qi(o,r,d),n!==void 0&&(o.selectedIndex=n),o}function Qi(a,e,t=W){for(let c=0;c<e.length;c++){let r=e[c],n=document.createElement("option");n.id=`${a.id}-${c}-${t()}`,n.textContent=r.toString(),a.appendChild(n)}}function b(a,e=void 0,t=[],c="",r=W){let n=document.createElement("div");return ut(n,a,e,t,c,r),n}function B(a,e=void 0,t=[],c=0,r=100,n=1,d=1,o="",i=W){let s=document.createElement("input");return ut(s,a,e,["form-input","input-sm",...t],o,i),s.setAttribute("type","number"),s.setAttribute("min",c.toString()),s.setAttribute("max",r.toString()),s.setAttribute("step",n.toString()),s.setAttribute("value",d.toString()),s}function ji(a,e=void 0,t=[],c="",r=W){let n=document.createElement("input");return ut(n,a,e,["form-input","input-sm",...t],c,r),n.setAttribute("type","text"),n}function D(a,e=void 0,t=[],c="",r=W){let n=document.createElement("span");return ut(n,a,e,t,c,r),n}function gi(a,e=void 0,t=[],c="",r=W){let n=document.createElement("canvas");return ut(n,a,e,t,c,r),n}function ut(a,e,t=void 0,c=[],r="",n=W){return a.id=`${e}-${n()}`,t&&t.appendChild(a),c.length>0&&a.classList.add(...c),r.length>0&&(a.textContent=r),a}function W(){return Yt.polarRowID}function Si(a){return a.ECGDiv!==void 0}function vi(a){return a.ACCDiv!==void 0}function dt(a,e,t="top"){a.setAttribute("data-tooltip",e),a.classList.add("tooltip",`tooltip-${t}`)}function Mt(a,e=void 0,t=void 0,c=!1,r=void 0,n=[],d=W){let o=document.createElement("button");e&&(o.id=`${e}-${d()}`),o.classList.add("flexbox","center");let i=document.createElement("i");return c?(i.classList.add("material-icons"),i.textContent=a):i.classList.add("icon",`icon-${a}`),o.appendChild(i),n.length>0&&o.classList.add(...n),r&&(o.onclick=r),t&&t.appendChild(o),o}function _e(a){return typeof a!="string"||a.length===0?a:a.charAt(0).toUpperCase()+a.slice(1)}function Ut(a,e=!0){let t="";return a.type==="lowpass"||a.type==="highpass"?t=`${a.type} (${Number.isInteger(a.Fc)?a.Fc:a.Fc?.toFixed(1)}Hz ${a.order} order ${_e(a.characteristic)})`:t=`bandpass (${Number.isInteger(a.Fl)?a.Fl:a.Fl?.toFixed(1)}-${Number.isInteger(a.Fh)?a.Fh:a.Fh?.toFixed(1)}Hz ${a.order} order ${_e(a.characteristic)})`,e&&(t=_e(t)),t}function Ce(a){let e="";return a.type==="lowpass"||a.type==="highpass"?e=`${Number.isInteger(a.Fc)?a.Fc:a.Fc?.toFixed(1)}Hz ${a.type}`:e=`${Number.isInteger(a.Fl)?a.Fl:a.Fl?.toFixed(1)}-${Number.isInteger(a.Fh)?a.Fh:a.Fh?.toFixed(1)}Hz ${a.type}`,e}var Lt=document.createElement("div");Lt.id="webapp_container";Lt.classList.add("container");document.body.appendChild(Lt);var xt=document.createElement("div");xt.id="top_bar_div";Lt.appendChild(xt);var me=document.createElement("h3");me.textContent="Polar H10 raw data visualizer";me.classList.add("title");xt.appendChild(me);xt.classList.add("center");var Ki="ble_connect_btn",ft=document.createElement("button");ft.setAttribute("data-tooltip","Connect new Polar H10");ft.id=Ki;ft.classList.add("btn","btn-primary","btn-action","s-circle","ble-conn");var Rt=document.createElement("div");Rt.id="content_div";Rt.classList.add("flexbox","content");Lt.appendChild(Rt);if(navigator.bluetooth===void 0){let a=document.createElement("p");a.innerHTML=`Web Bluetooth API is not present!<br>
Please make sure you are using the latest chrome/chromium based browser.<br>
Also make sure to enable experimental-web-platform-features in your browser <a href="chrome://flags/#enable-experimental-web-platform-features">chrome://flags/#enable-experimental-web-platform-features</a> `,a.setAttribute("style","margin:5% 20%;font-size:1.4em;"),Rt.appendChild(a),window.stop()}var Ai=document.createElement("i");Ai.setAttribute("class","icon icon-plus");ft.appendChild(Ai);ft.addEventListener("click",Ji(Rt,Ei));xt.appendChild(ft);function Ji(a,e){return async t=>{let c;try{c=await navigator.bluetooth.requestDevice({filters:[{namePrefix:"Polar"}],optionalServices:["battery_service","fb005c80-02e7-f387-1cad-8acd2d8df0c8"]})}catch(r){console.log(r);return}e(a,c)}}
/*! Bundled license information:

smoothie/smoothie.js:
  (**
   * @license
   * MIT License:
   *
   * Copyright (c) 2010-2013, Joe Walnes
   *               2013-2018, Drew Noakes
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   *)

fili/dist/fili.min.js:
  (**
   * @name    fili
   * @version 2.0.3 | December 13th 2018
   * @author  Florian Markert
   * @license MIT
   *)
*/
//# sourceMappingURL=index.js.map
